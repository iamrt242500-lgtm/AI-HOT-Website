<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI HOT NEWS - AI News Portal | Latest AI Technology News</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="AI HOT NEWS - Your premium AI news aggregation platform. Get the latest AI technology news, trends, and official updates from leading companies. Curated news from 40+ AI companies.">
    <meta name="keywords" content="AI news, artificial intelligence, machine learning, tech news, OpenAI, Google AI, Meta AI, cryptocurrency, neural networks, deep learning">
    <meta name="author" content="AI HOT NEWS">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    
    <!-- Open Graph Tags (Social Media) -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ai-hot-news.com">
    <meta property="og:title" content="AI HOT NEWS - Your Gateway to AI Innovation">
    <meta property="og:description" content="Stay updated with the latest AI technology news, trends, and official updates from 40+ leading companies. Real-time AI news aggregation platform.">
    <meta property="og:image" content="https://ai-hot-news.com/ai-news-logo.svg">
    <meta property="og:site_name" content="AI HOT NEWS">
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AI HOT NEWS - Your Gateway to AI Innovation">
    <meta name="twitter:description" content="Stay updated with the latest AI technology news and trends from 40+ companies">
    <meta name="twitter:image" content="https://ai-hot-news.com/ai-news-logo.svg">
    <meta name="twitter:site" content="@aihotnews">
    
    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#2547f4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AI HOT NEWS">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://ai-hot-news.com">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="ai-news-logo.svg">
    <link rel="apple-touch-icon" href="ai-news-logo.svg">
    
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-primary: #2547f4;
            --color-primary-light: #4a9fff;
            --color-bg: #000000;
            --color-surface: #1a1a1a;
            --color-surface-light: #2a2a2a;
            --color-text: #ffffff;
            --color-text-secondary: #888888;
            --color-border: #333333;
            --color-accent: #4a9fff;
        }

        html.light-mode {
            --color-bg: #ffffff;
            --color-surface: #f5f5f5;
            --color-surface-light: #eeeeee;
            --color-text: #000000;
            --color-text-secondary: #555555;
            --color-border: #d0d0d0;
            --color-primary: #1a3fa0;
            --color-primary-light: #2563eb;
            --color-accent: #1a3fa0;
        }

        body {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            overflow-x: hidden;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .material-symbols-outlined {
            font-family: 'Material Symbols Outlined', sans-serif;
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            display: inline-flex;
            line-height: 1;
            text-transform: none;
            letter-spacing: normal;
            word-wrap: normal;
            white-space: nowrap;
            direction: ltr;
            font-feature-settings: 'liga';
            font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--color-border);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: background 0.3s ease;
        }

        html.light-mode header {
            background: rgba(255, 255, 255, 0.95);
        }

        /* Light mode: ÌååÎûÄÏÉâ Î∞ïÏä§ ÏïàÏùò ÌÖçÏä§Ìä∏Îäî Ìù∞ÏÉâÏúºÎ°ú Ïú†ÏßÄ */
        html.light-mode [style*="background: var(--color-primary)"],
        html.light-mode [style*="background: var(--color-primary-light)"] {
            color: #ffffff !important;
        }

        /* Light mode: ÌååÎûÄÏÉâ Î∞∞Í≤Ω Î≤ÑÌäºÍ≥º Î∞∞ÏßÄÏùò ÌÖçÏä§Ìä∏Îäî Ìù∞ÏÉâ */
        html.light-mode .ai-tool-try-btn {
            color: #ffffff !important;
        }

        /* Light mode: Featured NewsÏôÄ HOT Î∞∞ÏßÄÏùò ÌÖçÏä§Ìä∏Îäî Ìù∞ÏÉâ */
        html.light-mode div[style*="background: var(--color-primary)"] {
            color: #ffffff !important;
        }

        /* Light mode: ÌôúÏÑ±ÌôîÎêú Quick Reaction Î≤ÑÌäº ÌÖçÏä§Ìä∏Îäî Ìù∞ÏÉâ */
        html.light-mode .reaction-wrapper.active .reaction-count {
            color: #ffffff !important;
        }

        /* Light mode: ÌôúÏÑ±ÌôîÎêú Î∞òÏùë Î≤ÑÌäº (ÌååÎûÄÏÉâ Î∞∞Í≤Ω) */
        html.light-mode .reaction-wrapper[style*="background: var(--color-primary)"] {
            color: #ffffff !important;
        }

        html.light-mode .reaction-wrapper[style*="background: var(--color-primary)"] .reaction-count {
            color: #ffffff !important;
        }

        .hamburger-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            color: var(--color-text);
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
        }

        .hamburger-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .header-title {
            flex: 1;
            font-size: 20px;
            font-weight: 600;
            color: var(--color-primary-light);
            display: flex;
            align-items: center;
            gap: 10px;
            white-space: nowrap;
        }

        .header-title img {
            width: 32px;
            height: 32px;
            display: block;
            flex-shrink: 0;
        }

        /* Main Layout */
        main {
            margin-top: 65px;
            min-height: calc(100vh - 65px);
        }

        /* Drawer Overlay */
        .drawer-overlay {
            position: fixed;
            inset: 0;
            z-index: 40;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .drawer-overlay.open {
            opacity: 1;
            pointer-events: auto;
        }

        /* Sidebar Drawer */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            z-index: 50;
            width: 350px;
            height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #0f0f1e 100%);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            padding-top: 65px;
        }

        .sidebar.open {
            transform: translateX(0);
        }

        /* Profile Section */
        .profile-section {
            padding: 20px;
            background: linear-gradient(135deg, rgba(37, 71, 244, 0.2) 0%, rgba(123, 45, 255, 0.2) 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .profile-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(74, 159, 255, 0.3);
            font-size: 36px;
        }

        .profile-info {
            text-align: center;
            display: none;
        }

        .profile-info.show {
            display: block;
        }

        .profile-name {
            font-size: 15px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 2px;
        }

        .profile-email {
            font-size: 11px;
            color: #888;
        }

        .profile-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            width: 100%;
        }

        .profile-buttons.logged-in {
            display: none;
        }

        .btn-primary {
            padding: 8px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: var(--color-primary-light);
        }

        .btn-logout {
            grid-column: 1 / -1;
            padding: 8px;
            background: rgba(255, 67, 67, 0.2);
            color: #ff6b6b;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            display: none;
        }

        .btn-logout.show {
            display: block;
        }

        /* Menu */
        .menu-list {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }

        .menu-section {
            margin-bottom: 16px;
        }

        .menu-section-title {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            color: #666;
            padding: 8px 12px;
            margin-bottom: 6px;
            letter-spacing: 1px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            color: #ccc;
            text-decoration: none;
            border-radius: 6px;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .menu-item.active {
            background: rgba(37, 71, 244, 0.2);
            color: var(--color-primary-light);
            border-left: 3px solid var(--color-primary-light);
            padding-left: 9px;
        }

        .menu-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .menu-item .material-symbols-outlined {
            font-size: 20px;
            font-weight: normal;
            font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 20;
        }

        /* Sidebar Footer */
        .sidebar-footer {
            padding: 12px 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #666;
            font-size: 11px;
        }

        /* Content Area */
        .content {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 20px;
        }

        .content-main {
            flex: 1;
            min-width: 0;
        }

        .ad-sidebar {
            width: 90px;
            flex-shrink: 0;
        }

        .ad-container {
            position: sticky;
            top: 85px;
            background: var(--color-surface-light);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            font-size: 11px;
            color: var(--color-text-secondary);
            min-height: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Page Sections */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .section {
            background: var(--color-surface);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--color-border);
            margin-bottom: 20px;
            margin-top: 30px;
        }

        .section h2 {
            color: var(--color-primary-light);
            margin-bottom: 15px;
            font-size: 18px;
        }

        .section h3 {
            color: var(--color-text);
            margin-bottom: 10px;
            font-size: 15px;
        }

        /* News Grid */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .news-card {
            background: var(--color-surface-light);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .news-card:hover {
            border-color: var(--color-primary);
            box-shadow: 0 4px 12px rgba(37, 71, 244, 0.3);
            transform: translateY(-2px);
        }

        .news-card h3 {
            color: var(--color-text);
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .news-card p {
            color: var(--color-text-secondary);
            font-size: 12px;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: var(--color-text-secondary);
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--color-border);
        }

        .news-source {
            background: rgba(37, 71, 244, 0.1);
            padding: 2px 8px;
            border-radius: 12px;
            border: 1px solid rgba(37, 71, 244, 0.3);
            color: var(--color-primary-light);
            font-size: 10px;
        }

        .bookmark-btn {
            background: none;
            border: none;
            color: var(--color-text-secondary);
            cursor: pointer;
            font-size: 16px;
            transition: color 0.3s ease;
        }

        .bookmark-btn.saved {
            color: #ffd700;
        }

        /* Settings */
        .settings-group {
            background: var(--color-surface-light);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 12px;
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--color-border);
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-label {
            font-size: 13px;
            font-weight: 500;
        }

        .toggle-switch {
            width: 40px;
            height: 24px;
            background: #2547f4;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            position: relative;
            transition: background 0.3s ease;
        }

        .toggle-switch.off {
            background: rgba(255, 255, 255, 0.2);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            top: 3px;
            left: 3px;
            transition: left 0.3s ease;
        }

        .toggle-switch.off::after {
            left: 19px;
        }

        select, input[type="text"] {
            padding: 8px;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 4px;
            color: var(--color-text);
            font-size: 12px;
            cursor: pointer;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .pagination button {
            padding: 6px 10px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .pagination button:disabled {
            background: var(--color-surface-light);
            color: var(--color-text-secondary);
            cursor: not-allowed;
        }

        .pagination button.active {
            background: var(--color-primary-light);
            font-weight: bold;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 200;
            background: rgba(0, 0, 0, 0.7);
            align-items: center;
            justify-content: center;
        }

        .modal.open {
            display: flex;
        }

        .modal-content {
            background: var(--color-surface);
            padding: 30px;
            border-radius: 12px;
            max-width: 400px;
            width: 90%;
            border: 1px solid var(--color-border);
        }

        .modal-content h2 {
            color: var(--color-primary-light);
            margin-bottom: 20px;
        }

        .modal-content input {
            width: 100%;
            margin-bottom: 10px;
            padding: 10px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-buttons button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Loading & Empty States */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--color-primary-light);
        }

        .spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid var(--color-surface-light);
            border-top: 3px solid var(--color-primary-light);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--color-text-secondary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 75vw;
                max-width: 280px;
            }

            .content {
                padding: 15px;
            }

            .news-grid {
                grid-template-columns: 1fr;
            }

            .header-title {
                font-size: 16px;
            }

            .header-title img {
                width: 24px;
                height: 24px;
            }
        }

        /* Toast Message Styles */
        .toast-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 10000;
        }

        .toast {
            background: rgba(77, 166, 255, 0.95);
            color: #ffffff;
            padding: 16px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 8px 24px rgba(77, 166, 255, 0.4);
            backdrop-filter: blur(10px);
            animation: slideInToast 0.3s ease-out forwards, slideOutToast 0.3s ease-out 1.7s forwards;
            max-width: 300px;
            word-wrap: break-word;
            line-height: 1.4;
        }

        @keyframes slideInToast {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutToast {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .toast-container {
                bottom: 20px;
                right: 20px;
            }

            .toast {
                padding: 14px 20px;
                font-size: 13px;
                max-width: 250px;
            }
        }
    </style>
</head>

<body>
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "AI HOT NEWS",
      "description": "Premium AI news aggregation platform with real-time updates from 40+ leading companies",
      "url": "https://ai-hot-news.com",
      "applicationCategory": "NewsApplication",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "1250"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "AI HOT NEWS",
        "url": "https://ai-hot-news.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://ai-hot-news.com/ai-news-logo-official.svg",
          "width": 200,
          "height": 200
        },
        "sameAs": [
          "https://twitter.com/aihotnews",
          "https://github.com/ai-hot-news"
        ]
      }
    }
    </script>
    
    <!-- Organization Schema - Google Search Console Optimized -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "AI HOT NEWS",
      "alternateName": "AI News Portal",
      "url": "https://ai-hot-news.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://ai-hot-news.com/ai-news-logo-official.svg",
        "width": 200,
        "height": 200,
        "caption": "AI HOT NEWS Official Logo"
      },
      "image": {
        "@type": "ImageObject",
        "url": "https://ai-hot-news.com/ai-news-logo-official.svg",
        "width": 200,
        "height": 200
      },
      "description": "Your gateway to AI innovation - Real-time news aggregation from 40+ leading AI companies",
      "brand": {
        "@type": "Brand",
        "name": "AI HOT NEWS"
      },
      "sameAs": [
        "https://twitter.com/aihotnews",
        "https://github.com/ai-hot-news"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "Customer Support",
        "email": "support@ai-hot-news.com"
      },
      "foundingDate": "2025",
      "areaServed": "Worldwide",
      "knowsAbout": ["Artificial Intelligence", "News Aggregation", "Technology News"]
    }
    </script>
    
    <!-- NewsCollectionPage Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "NewsCollectionPage",
      "name": "AI HOT NEWS - Latest AI News",
      "url": "https://ai-hot-news.com",
      "description": "Latest artificial intelligence news from leading companies and research institutions",
      "publisher": {
        "@type": "Organization",
        "name": "AI HOT NEWS",
        "logo": {
          "@type": "ImageObject",
          "url": "https://ai-hot-news.com/ai-news-logo-official.svg",
          "width": 200,
          "height": 200
        }
      }
    }
    </script>

    <!-- Status Indicator -->
    <div id="statusIndicator" style="position: fixed; top: 0; left: 0; right: 0; background: #2a9f1d; color: white; padding: 10px; text-align: center; font-size: 12px; z-index: 10001; display: none;">
        Page is loading...
    </div>

    <!-- Header -->
        <header>
        <button class="hamburger-btn" id="hamburgerBtn" aria-label="Menu">
            <span class="material-symbols-outlined">menu</span>
        </button>
        <button class="hamburger-btn" id="backBtn" style="display: none;" aria-label="Back" onclick="app.goBack()">
            <span class="material-symbols-outlined">arrow_back</span>
        </button>
        <div class="header-title" onclick="app.navigate('home')" style="cursor: pointer; transition: opacity 0.2s ease; display: flex; align-items: center; gap: 10px;" 
             onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
            <img src="ai-news-logo-official.svg" alt="AI HOT NEWS Official Logo" style="width: 32px; height: 32px; display: block; border-radius: 4px;">
            <span>AI HOT NEWS</span>
        </div>
        <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
            <div style="display: flex; align-items: center; background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 6px; padding-right: 4px; width: 280px;">
                <input type="text" id="headerSearchInput" placeholder="Search news..." 
                       style="flex: 1; padding: 8px 12px; background: transparent; border: none; color: var(--color-text); font-size: 12px; outline: none;" 
                       onkeypress="if(event.key==='Enter') app.headerSearch()">
                <button onclick="app.headerSearch()" style="padding: 6px 8px; background: transparent; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease; color: #999;" 
                        onmouseover="this.style.color='#ccc'" 
                        onmouseout="this.style.color='#999'" 
                        title="Search">
                    <span class="material-symbols-outlined" style="font-size: 18px;">search</span>
                </button>
            </div>
        </div>
        <button class="hamburger-btn" id="themeToggle" aria-label="Toggle theme">
            <span class="material-symbols-outlined" id="themeIcon">dark_mode</span>
        </button>
    </header>

    <!-- Drawer Overlay -->
    <div class="drawer-overlay" id="drawerOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="profile-section">
            <div class="profile-avatar" id="profileAvatar">üë§</div>
            <div class="profile-info" id="profileInfo">
                <div class="profile-name" id="profileName">User</div>
                <div class="profile-email" id="profileEmail">user@example.com</div>
            </div>
            <div class="profile-buttons" id="profileButtons">
                <button class="btn-primary" onclick="app.openLogin()">Login</button>
                <button class="btn-primary" onclick="app.openSignup()">Sign Up</button>
            </div>
            <button class="btn-logout" id="logoutBtn" onclick="app.logout()">Logout</button>
        </div>

        <div class="menu-list">
            <div class="menu-section">
                <div class="menu-item active" data-route="home">
                    <span class="material-symbols-outlined">home</span>
                    <span>Home</span>
                </div>
                <div class="menu-item" data-route="latest">
                    <span class="material-symbols-outlined">newspaper</span>
                    <span>Latest</span>
                </div>
                <div class="menu-item" data-route="trends">
                    <span class="material-symbols-outlined">trending_up</span>
                    <span>Trends</span>
                </div>
                <div class="menu-item" data-route="sns">
                    <span class="material-symbols-outlined">apps</span>
                    <span>SNS Official Updates</span>
                </div>
                <div class="menu-item" data-route="search">
                    <span class="material-symbols-outlined">search</span>
                    <span>Search</span>
                </div>
                <div class="menu-item" data-route="saved">
                    <span class="material-symbols-outlined">schedule</span>
                    <span>Save for Later</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Settings</div>
                <div class="menu-item" data-route="settings">
                    <span class="material-symbols-outlined">settings</span>
                    <span>Settings</span>
                </div>
                <div class="menu-item" data-route="help">
                    <span class="material-symbols-outlined">help</span>
                    <span>Help & Support</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Premium</div>
                <div class="menu-item" data-route="premium">
                    <span class="material-symbols-outlined" style="color: var(--color-accent);">crown</span>
                    <span>üëë Upgrade to Premium</span>
                </div>
            </div>
        </div>

        <div class="sidebar-footer">
            <div>AI HOT NEWS v1.0.0</div>
            <div>¬© 2025 AI News</div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="content">
        <div class="content-main">
        <!-- Home Page -->
        <div class="page active" id="homePage">
            <div class="section">
                <h3>Featured News</h3>
                <div id="homeNewsList" class="news-grid"></div>
                <div id="homePagination" class="pagination"></div>
            </div>

            <!-- SNS Official Accounts Section -->
            <div class="section">
                <h3 style="margin-bottom: 15px;">üì± SNS Official Updates</h3>
                
                <!-- Company Filter -->
                <div id="snsFeaturedCompanyFilter" style="display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; overflow-x: auto;">
                    <!-- Companies will be populated by JavaScript -->
                </div>
                
                <!-- SNS Articles Grid -->
                <div id="snsFeaturedArticlesGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px;">
                    <!-- SNS articles will be populated by JavaScript -->
                </div>
                <div id="snsFeaturedPagination" class="pagination"></div>
            </div>

            <div class="section">
                <h3>üî• HOT TAGS</h3>
                <div id="hotTags" style="display: flex; flex-wrap: wrap; gap: 10px;"></div>
            </div>

            <!-- AI Tools & Services Recommendation Section -->
            <div class="section">
                <h3 style="margin-bottom: 15px;">ü§ñ Recommended AI Tools</h3>
                
                <!-- Category Filter -->
                <div id="toolsCategoryFilter" style="display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap;">
                    <!-- Categories will be populated by JavaScript -->
                </div>
                
                <!-- AI Tools Grid -->
                <div id="aiToolsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px;">
                    <!-- Tools will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Latest Page -->
        <div class="page" id="latestPage">
            <div class="section">
                <h2>üì∞ Latest News</h2>
                <div id="latestNewsList" class="news-grid"></div>
                <div id="latestPagination" class="pagination"></div>
            </div>
        </div>

        <!-- SNS Official Updates Page -->
        <div class="page" id="snsPage">
            <div class="section">
                <h2>üì± SNS Official Updates</h2>
                
                <!-- Company Filter -->
                <div id="snsCompanyFilter" style="display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; overflow-x: auto;">
                    <!-- Companies will be populated by JavaScript -->
                </div>
                
                <!-- SNS Articles Grid -->
                <div id="snsArticlesGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px;">
                    <!-- SNS articles will be populated by JavaScript -->
                </div>
                <div id="snsPagination" class="pagination"></div>
            </div>
        </div>

        <!-- Trends Page -->
        <div class="page" id="trendsPage">
            <div class="section">
                <h2>üî• Trending Topics</h2>
                <div id="trendsList"></div>
            </div>
        </div>

        <!-- Saved Page -->
        <div class="page" id="savedPage">
            <div class="section">
                <h2>ÔøΩ Save for Later</h2>
                <div id="savedNewsList" class="news-grid"></div>
                <div id="savedPagination" class="pagination"></div>
            </div>
        </div>

        <!-- Search Page -->
        <div class="page" id="searchPage">
            <div class="section">
                <h2>üîç Search</h2>
                <div style="display: flex; gap: 10px; margin-bottom: 15px; position: relative;">
                    <div style="position: relative; flex: 1;">
                        <input type="text" id="searchInput" placeholder="Search articles..." 
                               style="width: 100%;" 
                               oninput="app.updateSearchSuggestions()" 
                               onfocus="app.updateSearchSuggestions()"
                               onblur="setTimeout(() => { document.getElementById('searchSuggestions').style.display = 'none'; }, 200)"
                               onkeypress="if(event.key==='Enter') app.search()">
                        <div id="searchSuggestions" style="position: absolute; top: 100%; left: 0; right: 0; background: var(--color-surface); border: 1px solid var(--color-border); border-top: none; border-radius: 0 0 4px 4px; max-height: 200px; overflow-y: auto; z-index: 10; display: none;"></div>
                    </div>
                    <button class="btn-primary" onclick="app.search()">Search</button>
                </div>

                <!-- Hot Tags Section -->
                <div style="margin-bottom: 25px;">
                    <h3 style="margin-bottom: 10px; font-size: 14px; color: var(--color-text-secondary);">üî• Popular Tags</h3>
                    <div id="searchHotTags" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
                </div>

                <div id="searchResults" class="news-grid"></div>
                <div id="searchPagination" style="display: flex; justify-content: center; gap: 8px; margin-top: 20px; flex-wrap: wrap;"></div>
            </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settingsPage">
            <div class="section">
                <h2>‚öôÔ∏è Settings</h2>

                <div class="settings-group">
                    <h3>Language</h3>
                    <div class="settings-item">
                        <span class="settings-label">Interface Language</span>
                        <select id="languageSelect" onchange="app.changeLanguage(this.value)">
                            <option value="en">English</option>
                            <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                            <option value="ja">Êó•Êú¨Ë™û</option>
                            <option value="zh">‰∏≠Êñá</option>
                        </select>
                    </div>
                    <div class="settings-item">
                        <span class="settings-label">Auto-translate articles</span>
                        <button class="toggle-switch" id="autoTranslateToggle" onclick="app.toggleAutoTranslate()"></button>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Priority Topics</h3>
                    <div id="priorityTopics"></div>
                </div>

                <div class="settings-group">
                    <h3>Notifications</h3>
                    <div class="settings-item">
                        <span class="settings-label">Enable notifications</span>
                        <button class="toggle-switch" id="notificationToggle" onclick="app.toggleNotifications()"></button>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Data</h3>
                    <button class="btn-primary" onclick="app.clearCache()" style="width: 100%; margin-bottom: 10px;">Clear Cache</button>
                    <button class="btn-primary" onclick="app.clearSaved()" style="width: 100%; background: rgba(255, 67, 67, 0.3); color: #ff6b6b;">Clear All Saved</button>
                </div>
            </div>
        </div>

        <!-- Help Page -->
        <div class="page" id="helpPage">
            <div class="section">
                <h2>üÜò Help & Support</h2>
                <div style="line-height: 1.8;">
                    <h3 style="margin-top: 15px;">FAQ</h3>
                    <p><strong>Q: How do I save articles?</strong></p>
                    <p>A: Click the bookmark icon on any article to save it to your collection.</p>

                    <p><strong>Q: Can I change the interface language?</strong></p>
                    <p>A: Yes! Go to Settings > Language to choose your preferred language.</p>

                    <p><strong>Q: How often are articles updated?</strong></p>
                    <p>A: Articles are updated every 5 minutes from multiple sources.</p>

                    <h3 style="margin-top: 20px;">Contact Us</h3>
                    <p>Email: support@aihotnews.com</p>
                    <p>Version: v1.0.0</p>
                </div>
            </div>
        </div>

        <!-- Premium Page -->
        <div class="page" id="premiumPage">
            <div class="section" style="max-width: 1000px;">
                <h2 style="text-align: center; margin-bottom: 10px;">‚ú® Upgrade to Premium</h2>
                <p style="text-align: center; color: var(--color-text-secondary); margin-bottom: 40px;">Unlock exclusive features and get the most out of AI HOT NEWS</p>

                <!-- Pricing Cards -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 40px;">
                    <!-- Free Plan Card -->
                    <div style="background: var(--color-surface); border: 2px solid var(--color-border); border-radius: 12px; padding: 25px; text-align: center;">
                        <h3 style="margin-bottom: 10px; color: var(--color-text);">Free</h3>
                        <div style="font-size: 32px; font-weight: bold; color: var(--color-accent); margin: 20px 0;">$0</div>
                        <p style="color: var(--color-text-secondary); margin-bottom: 20px;">Forever free</p>
                        <ul style="list-style: none; text-align: left; margin-bottom: 20px; font-size: 14px;">
                            <li style="padding: 8px 0;">‚úì 20+ News Sources</li>
                            <li style="padding: 8px 0;">‚úì Basic Search</li>
                            <li style="padding: 8px 0;">‚úì 50 Bookmarks</li>
                            <li style="padding: 8px 0; color: var(--color-text-secondary);">‚úó Advanced Search</li>
                            <li style="padding: 8px 0; color: var(--color-text-secondary);">‚úó Unlimited Bookmarks</li>
                            <li style="padding: 8px 0; color: var(--color-text-secondary);">‚úó Real-time Alerts</li>
                        </ul>
                        <button style="width: 100%; padding: 10px; background: var(--color-surface-light); border: 1px solid var(--color-border); color: var(--color-text); border-radius: 6px; cursor: pointer; font-weight: bold;" disabled>Current Plan</button>
                    </div>

                    <!-- Premium Monthly Card -->
                    <div style="background: var(--color-surface); border: 3px solid var(--color-accent); border-radius: 12px; padding: 25px; text-align: center; position: relative; transform: scale(1.05);">
                        <div style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--color-accent); color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: bold;">RECOMMENDED</div>
                        <h3 style="margin-bottom: 10px; color: var(--color-accent);">Premium Monthly</h3>
                        <div style="font-size: 32px; font-weight: bold; color: var(--color-accent); margin: 20px 0;">$4.99<span style="font-size: 16px;">/mo</span></div>
                        <p style="color: var(--color-text-secondary); margin-bottom: 20px;">Monthly subscription</p>
                        <ul style="list-style: none; text-align: left; margin-bottom: 20px; font-size: 14px;">
                            <li style="padding: 8px 0;">‚úì All Free Features</li>
                            <li style="padding: 8px 0;">‚úì Advanced Boolean Search</li>
                            <li style="padding: 8px 0;">‚úì Unlimited Bookmarks</li>
                            <li style="padding: 8px 0;">‚úì Real-time Alerts</li>
                            <li style="padding: 8px 0;">‚úì Email Newsletters</li>
                            <li style="padding: 8px 0;">‚úì Ad-free Experience</li>
                        </ul>
                        <button style="width: 100%; padding: 10px; background: var(--color-accent); border: none; color: white; border-radius: 6px; cursor: pointer; font-weight: bold;" onclick="alert('Coming Soon! PayPal integration will be available soon.')">Choose Plan</button>
                    </div>

                    <!-- Premium Yearly Card -->
                    <div style="background: var(--color-surface); border: 2px solid var(--color-border); border-radius: 12px; padding: 25px; text-align: center;">
                        <h3 style="margin-bottom: 10px; color: var(--color-text);">Premium Yearly</h3>
                        <div style="font-size: 32px; font-weight: bold; color: var(--color-accent); margin: 20px 0;">$39.99<span style="font-size: 16px;">/yr</span></div>
                        <p style="color: var(--color-text-secondary); margin-bottom: 20px;">Save 33% vs Monthly</p>
                        <ul style="list-style: none; text-align: left; margin-bottom: 20px; font-size: 14px;">
                            <li style="padding: 8px 0;">‚úì All Premium Features</li>
                            <li style="padding: 8px 0;">‚úì Advanced Analytics</li>
                            <li style="padding: 8px 0;">‚úì Priority Support</li>
                            <li style="padding: 8px 0;">‚úì Exclusive Reports</li>
                            <li style="padding: 8px 0;">‚úì Early Access</li>
                            <li style="padding: 8px 0;">‚úì 10% Discount</li>
                        </ul>
                        <button style="width: 100%; padding: 10px; background: var(--color-accent); border: none; color: white; border-radius: 6px; cursor: pointer; font-weight: bold;" onclick="alert('Coming Soon! PayPal integration will be available soon.')">Choose Plan</button>
                    </div>
                </div>

                <!-- Features Comparison -->
                <div style="background: var(--color-surface); border-radius: 12px; padding: 30px; margin-top: 40px;">
                    <h3 style="margin-bottom: 20px; text-align: center;">Premium Features</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="padding: 15px;">
                            <div style="font-size: 20px; margin-bottom: 8px;">üîç</div>
                            <h4 style="margin-bottom: 5px;">Advanced Search</h4>
                            <p style="font-size: 13px; color: var(--color-text-secondary);">Boolean operators (AND, OR, NOT) for precise searches</p>
                        </div>
                        <div style="padding: 15px;">
                            <div style="font-size: 20px; margin-bottom: 8px;">üìå</div>
                            <h4 style="margin-bottom: 5px;">Unlimited Bookmarks</h4>
                            <p style="font-size: 13px; color: var(--color-text-secondary);">Save unlimited articles with custom folders and tags</p>
                        </div>
                        <div style="padding: 15px;">
                            <div style="font-size: 20px; margin-bottom: 8px;">üîî</div>
                            <h4 style="margin-bottom: 5px;">Real-time Alerts</h4>
                            <p style="font-size: 13px; color: var(--color-text-secondary);">Get notified about news from your favorite companies</p>
                        </div>
                        <div style="padding: 15px;">
                            <div style="font-size: 20px; margin-bottom: 8px;">üìß</div>
                            <h4 style="margin-bottom: 5px;">Email Newsletters</h4>
                            <p style="font-size: 13px; color: var(--color-text-secondary);">Curated daily or weekly newsletters delivered to your inbox</p>
                        </div>
                        <div style="padding: 15px;">
                            <div style="font-size: 20px; margin-bottom: 8px;">üòä</div>
                            <h4 style="margin-bottom: 5px;">Sentiment Analysis</h4>
                            <p style="font-size: 13px; color: var(--color-text-secondary);">Filter articles by sentiment (positive, neutral, negative)</p>
                        </div>
                        <div style="padding: 15px;">
                            <div style="font-size: 20px; margin-bottom: 8px;">üìä</div>
                            <h4 style="margin-bottom: 5px;">Advanced Analytics</h4>
                            <p style="font-size: 13px; color: var(--color-text-secondary);">Deep insights into AI trends and market analysis</p>
                        </div>
                    </div>
                </div>

                <!-- FAQ Section -->
                <div style="margin-top: 40px;">
                    <h3 style="margin-bottom: 20px; text-align: center;">Frequently Asked Questions</h3>
                    <div style="display: grid; gap: 15px;">
                        <div style="background: var(--color-surface); border-radius: 8px; padding: 15px;">
                            <h4 style="margin-bottom: 8px; color: var(--color-accent);">Can I cancel anytime?</h4>
                            <p style="color: var(--color-text-secondary);">Yes! Cancel your subscription at any time with no questions asked.</p>
                        </div>
                        <div style="background: var(--color-surface); border-radius: 8px; padding: 15px;">
                            <h4 style="margin-bottom: 8px; color: var(--color-accent);">Is there a free trial?</h4>
                            <p style="color: var(--color-text-secondary);">Yes, enjoy 7 days free for your first month of Premium.</p>
                        </div>
                        <div style="background: var(--color-surface); border-radius: 8px; padding: 15px;">
                            <h4 style="margin-bottom: 8px; color: var(--color-accent);">What payment methods do you accept?</h4>
                            <p style="color: var(--color-text-secondary);">We accept all major credit cards through secure PayPal integration.</p>
                        </div>
                        <div style="background: var(--color-surface); border-radius: 8px; padding: 15px;">
                            <h4 style="margin-bottom: 8px; color: var(--color-accent);">Can I upgrade or downgrade?</h4>
                            <p style="color: var(--color-text-secondary);">Yes! You can change your plan at any time from your account settings.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Article Detail Page -->
        <div class="page" id="detailPage" style="background: var(--color-bg); padding: 20px 0; overflow-y: auto;">
            <div class="section" style="max-width: 900px; margin: 60px auto 0;">
                <!-- Breadcrumb -->
                <div style="display: flex; gap: 10px; margin-bottom: 25px; font-size: 13px; color: var(--color-text-secondary); flex-wrap: wrap;">
                    <a href="#" onclick="app.navigate('home')" style="color: var(--color-text-secondary); text-decoration: none; cursor: pointer;">Home</a>
                    <span>/</span>
                    <a href="#" onclick="app.navigate('latest')" id="detailCategoryLink" style="color: var(--color-text-secondary); text-decoration: none; cursor: pointer;">
                        <span id="detailCategory" style="color: var(--color-text-secondary);">Latest</span>
                    </a>
                    <span>/</span>
                    <span id="detailBreadcrumb" style="color: var(--color-text); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></span>
                </div>

                <!-- Main Content -->
                <div style="display: grid; grid-template-columns: 1fr 300px; gap: 40px; align-items: start;">
                    <!-- Article Content -->
                    <div>
                        <!-- Header -->
                        <div style="border-bottom: 1px solid var(--color-border); padding-bottom: 25px; margin-bottom: 25px;">
                            <h1 id="detailTitle" style="font-size: 42px; font-weight: bold; line-height: 1.2; margin-bottom: 15px; color: var(--color-text);"></h1>
                            
                            <!-- Meta Info -->
                            <div style="display: flex; gap: 20px; font-size: 13px; color: var(--color-text-secondary); flex-wrap: wrap;">
                                <div style="display: flex; align-items: center; gap: 5px;">
                                    <span style="font-size: 18px;">‚úçÔ∏è</span>
                                    <span id="detailAuthor"></span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 5px;">
                                    <span style="font-size: 18px;">üì∞</span>
                                    <span id="detailSource"></span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 5px;">
                                    <span style="font-size: 18px;">üìÖ</span>
                                    <span id="detailDate"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Article Body -->
                        <article id="detailContent" style="line-height: 1.8; font-size: 16px; color: var(--color-text); margin-bottom: 30px;">
                        </article>

                        <!-- Summary Box -->
                        <div style="background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 8px; padding: 20px; margin: 30px 0;">
                            <h3 style="color: var(--color-accent); font-size: 16px; font-weight: bold; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                <span style="font-size: 20px;">‚ú®</span>
                                Key Summary
                            </h3>
                            <ul id="detailSummary" style="list-style: disc; margin-left: 20px; display: flex; flex-direction: column; gap: 10px; color: var(--color-text);"></ul>
                        </div>

                        <!-- Read More Button -->
                        <div style="display: flex; gap: 10px; margin-top: 30px; flex-wrap: wrap; align-items: center;">
                            <button id="detailSaveForLater" style="cursor: pointer; display: flex; align-items: center; gap: 8px; background: var(--color-surface-light); border: 1px solid var(--color-border); color: var(--color-text); padding: 10px 16px; border-radius: 6px; font-size: 14px; transition: all 0.3s ease;" onmouseover="this.style.background='var(--color-surface)'; this.style.borderColor='var(--color-accent)';" onmouseout="this.style.background='var(--color-surface-light)'; this.style.borderColor='var(--color-border)';">
                                <div style="position: relative; width: 18px; height: 18px;">
                                    <input type="checkbox" id="saveCheckbox" style="position: absolute; width: 100%; height: 100%; cursor: pointer; margin: 0; opacity: 0; z-index: 1;">
                                    <div id="checkboxVisual" style="position: absolute; width: 18px; height: 18px; border: 2px solid var(--color-accent); border-radius: 4px; background: transparent; pointer-events: none; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; color: var(--color-bg); transition: all 0.2s ease;">
                                    </div>
                                </div>
                                <span>Save for Later</span>
                            </button>

                            <!-- Share Button -->
                            <button id="detailShareBtn" style="cursor: pointer; display: flex; align-items: center; gap: 8px; background: var(--color-surface-light); border: 1px solid var(--color-border); color: var(--color-text); padding: 10px 16px; border-radius: 6px; font-size: 14px; transition: all 0.3s ease;" onmouseover="this.style.background='var(--color-surface)'; this.style.borderColor='var(--color-accent)';" onmouseout="this.style.background='var(--color-surface-light)'; this.style.borderColor='var(--color-border)';">
                                <span class="material-symbols-outlined" style="font-size: 18px;">share</span>
                                <span>Share</span>
                            </button>

                            <!-- Quick Reaction Buttons -->
                            <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                                <span style="font-size: 12px; color: var(--color-text-secondary);">Quick React:</span>
                                <div style="display: flex; gap: 8px; align-items: center;">
                                    <div class="reaction-wrapper" data-reaction="üëç" style="display: flex; align-items: center; gap: 4px; padding: 6px 10px; background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 4px; cursor: pointer; transition: all 0.2s ease;" title="Like" onclick="app.toggleReaction('üëç')">
                                        <span style="font-size: 18px;">üëç</span>
                                        <span class="reaction-count" style="font-size: 12px; color: var(--color-text-secondary);">0</span>
                                    </div>
                                    <div class="reaction-wrapper" data-reaction="üî•" style="display: flex; align-items: center; gap: 4px; padding: 6px 10px; background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 4px; cursor: pointer; transition: all 0.2s ease;" title="Hot" onclick="app.toggleReaction('üî•')">
                                        <span style="font-size: 18px;">üî•</span>
                                        <span class="reaction-count" style="font-size: 12px; color: var(--color-text-secondary);">0</span>
                                    </div>
                                    <div class="reaction-wrapper" data-reaction="üòä" style="display: flex; align-items: center; gap: 4px; padding: 6px 10px; background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 4px; cursor: pointer; transition: all 0.2s ease;" title="Good" onclick="app.toggleReaction('üòä')">
                                        <span style="font-size: 18px;">üòä</span>
                                        <span class="reaction-count" style="font-size: 12px; color: var(--color-text-secondary);">0</span>
                                    </div>
                                    <div class="reaction-wrapper" data-reaction="üòï" style="display: flex; align-items: center; gap: 4px; padding: 6px 10px; background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 4px; cursor: pointer; transition: all 0.2s ease;" title="Meh" onclick="app.toggleReaction('üòï')">
                                        <span style="font-size: 18px;">üòï</span>
                                        <span class="reaction-count" style="font-size: 12px; color: var(--color-text-secondary);">0</span>
                                    </div>
                                </div>
                            </div>

                            <button id="detailReadMore" class="btn-primary" style="cursor: pointer; display: flex; align-items: center; gap: 8px; margin-left: auto;">
                                Read Full Article
                                <span style="font-size: 18px;">‚Üí</span>
                            </button>
                        </div>

                        <!-- Share Modal -->
                        <div id="shareModal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 12px; padding: 20px; z-index: 2000; box-shadow: 0 10px 40px rgba(0,0,0,0.3); min-width: 300px; display: none;">
                            <h3 style="margin-bottom: 15px;">Share Article</h3>
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <button id="shareTwitterBtn" style="cursor: pointer; padding: 10px 15px; background: #1DA1F2; color: white; border: none; border-radius: 6px; font-weight: bold; transition: all 0.2s ease;" onmouseover="this.style.opacity='0.8';" onmouseout="this.style.opacity='1';">
                                    <span class="material-symbols-outlined" style="vertical-align: middle; font-size: 18px; margin-right: 8px;">share</span> Share on Twitter
                                </button>
                                <button id="shareFacebookBtn" style="cursor: pointer; padding: 10px 15px; background: #1877F2; color: white; border: none; border-radius: 6px; font-weight: bold; transition: all 0.2s ease;" onmouseover="this.style.opacity='0.8';" onmouseout="this.style.opacity='1';">
                                    <span class="material-symbols-outlined" style="vertical-align: middle; font-size: 18px; margin-right: 8px;">share</span> Share on Facebook
                                </button>
                                <button id="shareLinkedinBtn" style="cursor: pointer; padding: 10px 15px; background: #0A66C2; color: white; border: none; border-radius: 6px; font-weight: bold; transition: all 0.2s ease;" onmouseover="this.style.opacity='0.8';" onmouseout="this.style.opacity='1';">
                                    <span class="material-symbols-outlined" style="vertical-align: middle; font-size: 18px; margin-right: 8px;">share</span> Share on LinkedIn
                                </button>
                                <button id="shareCopyLinkBtn" style="cursor: pointer; padding: 10px 15px; background: var(--color-surface-light); color: var(--color-text); border: 1px solid var(--color-border); border-radius: 6px; font-weight: bold; transition: all 0.2s ease;" onmouseover="this.style.background='var(--color-accent)'; this.style.color='white';" onmouseout="this.style.background='var(--color-surface-light)'; this.style.color='var(--color-text)';">
                                    <span class="material-symbols-outlined" style="vertical-align: middle; font-size: 18px; margin-right: 8px;">content_copy</span> Copy Link
                                </button>
                            </div>
                            <button id="shareModalCloseBtn" onclick="app.closeShareModal()" style="margin-top: 15px; width: 100%; padding: 10px; background: var(--color-surface-light); color: var(--color-text); border: 1px solid var(--color-border); border-radius: 6px; cursor: pointer;">Close</button>
                        </div>

                        <!-- Share Modal Overlay -->
                        <div id="shareModalOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1999; display: none;" onclick="app.closeShareModal()"></div>
                    </div>

                    <!-- Sidebar - Related Articles -->
                    <div style="position: sticky; top: 100px;">
                        <h3 style="font-size: 16px; font-weight: bold; margin-bottom: 15px; color: var(--color-text);">Related Articles</h3>
                        <div id="detailRelated" style="display: flex; flex-direction: column; gap: 15px;"></div>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Ad Sidebar -->
        <aside class="ad-sidebar">
            <div class="ad-container">
                <div style="margin-bottom: 10px; font-size: 14px; font-weight: bold;">Advertisement</div>
                <!-- Google AdSense Code (Replace with your AdSense code) -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-xxxxxxxxxxxxxxxx"
                     data-ad-slot="xxxxxxxxxx"
                     data-ad-format="vertical"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
                <!-- Fallback: Placeholder text -->
                <p style="color: var(--color-text-secondary); font-size: 11px; margin-top: 20px;">
                    üì¢ Google AdSense<br>
                    Í¥ëÍ≥† ÏòÅÏó≠<br>
                    (Your ads here)
                </p>
            </div>
        </aside>
    </main>

    <!-- Login Modal -->
    <div class="modal" id="loginModal" onclick="if(event.target === this) app.closeLogin()">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">Login</h2>
                <button onclick="app.closeLogin()" style="background: none; border: none; font-size: 24px; color: var(--color-text-secondary); cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                    ‚úï
                </button>
            </div>
            <input type="email" id="loginEmail" placeholder="Email">
            <input type="password" id="loginPassword" placeholder="Password">
            <div class="modal-buttons">
                <button class="btn-primary" onclick="app.performLogin()">Login</button>
                <button style="background: var(--color-surface-light); border: 1px solid var(--color-border); color: var(--color-text);" onclick="app.closeLogin()">Cancel</button>
            </div>
            
            <!-- Google OAuth Divider -->
            <div style="display: flex; align-items: center; margin: 16px 0; gap: 10px;">
                <div style="flex: 1; height: 1px; background: var(--color-border);"></div>
                <span style="color: var(--color-text-secondary); font-size: 12px;">or</span>
                <div style="flex: 1; height: 1px; background: var(--color-border);"></div>
            </div>
            
            <!-- Google OAuth Button -->
            <button style="width: 100%; padding: 12px 16px; background: white; border: 1px solid #e0e0e0; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; font-weight: 500; color: #000; transition: background 0.3s ease; margin-bottom: 12px;"
                    onmouseover="this.style.background='#f5f5f5';"
                    onmouseout="this.style.background='white';"
                    onclick="app.loginWithGoogle()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                </svg>
                Continue with Google
            </button>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal" id="signupModal" onclick="if(event.target === this) app.closeSignup()">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">Sign Up</h2>
                <button onclick="app.closeSignup()" style="background: none; border: none; font-size: 24px; color: var(--color-text-secondary); cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                    ‚úï
                </button>
            </div>
            <input type="email" id="signupEmail" placeholder="Email" onchange="app.validateSignupForm()">
            <div id="signupEmailError" style="font-size: 11px; color: #ff6b6b; font-weight: 300; margin-top: 5px; display: none;"></div>
            
            <input type="text" id="signupName" placeholder="Full Name">
            
            <input type="password" id="signupPassword" placeholder="Password (Min 8 chars, uppercase, lowercase, number, special char)" onchange="app.validateSignupForm()" style="margin-top: 12px;">
            <div id="signupPasswordError" style="font-size: 11px; color: #ff6b6b; font-weight: 300; margin-top: 5px; display: none;"></div>
            
            <div class="modal-buttons">
                <button class="btn-primary" onclick="app.performSignup()">Sign Up</button>
                <button style="background: var(--color-surface-light); border: 1px solid var(--color-border); color: var(--color-text);" onclick="app.closeSignup()">Cancel</button>
            </div>
            
            <!-- Google OAuth Divider -->
            <div style="display: flex; align-items: center; margin: 16px 0; gap: 10px;">
                <div style="flex: 1; height: 1px; background: var(--color-border);"></div>
                <span style="color: var(--color-text-secondary); font-size: 12px;">or</span>
                <div style="flex: 1; height: 1px; background: var(--color-border);"></div>
            </div>
            
            <!-- Google OAuth Button -->
            <button style="width: 100%; padding: 12px 16px; background: white; border: 1px solid #e0e0e0; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; font-weight: 500; color: #000; transition: background 0.3s ease; margin-bottom: 12px;"
                    onmouseover="this.style.background='#f5f5f5';"
                    onmouseout="this.style.background='white';"
                    onclick="app.signupWithGoogle()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                </svg>
                Sign up with Google
            </button>
        </div>
    </div>

    <script src="api-client.js"></script>
    <script>
        // i18n translations - Comprehensive translations for all UI elements
        const i18n = {
            en: {
                // Menu
                home: 'Home',
                latest: 'Latest',
                trends: 'Trends',
                saved: 'Saved',
                search: 'Search',
                settings: 'Settings',
                help: 'Help',
                sns: 'SNS Official Updates',
                logout: 'Logout',
                login: 'Login',
                signup: 'Sign Up',
                
                // Settings page
                settingsTitle: '‚öôÔ∏è Settings',
                language: 'Language',
                interfaceLanguage: 'Interface Language',
                autoTranslate: 'Auto-translate articles',
                priorityTopics: 'Priority Topics',
                notifications: 'Notifications',
                enableNotifications: 'Enable notifications',
                theme: 'Theme',
                darkMode: 'Dark Mode',
                lightMode: 'Light Mode',
                clearCache: 'Clear Cache',
                clearSaved: 'Clear Saved Articles',
                
                // Home page
                featuredNews: 'Featured News',
                tryNow: 'Try Now',
                snsUpdates: 'SNS Official Updates',
                hotTags: 'HOT TAGS',
                recommendedAITools: 'Recommended AI Tools',
                aiTools: 'AI Tools',
                allCompanies: 'All Companies',
                
                // Latest page
                latestNews: 'Latest News',
                
                // Saved page
                savedForLater: 'Saved for Later',
                noSavedArticles: 'No saved articles',
                
                // Search page
                searchPlaceholder: 'Search articles...',
                searchResults: 'Search Results',
                popularTags: 'Popular Tags',
                
                // Pagination
                prev: 'Prev',
                next: 'Next',
                pageOf: 'Page',
                
                // Articles
                noArticles: 'No articles available',
                noArticlesFound: 'No articles found',
                unknown: 'Unknown',
                unknownSource: 'Unknown Source',
                
                // Help page
                helpTitle: '‚ùì Help & Support',
                about: 'About AI HOT NEWS',
                faq: 'Frequently Asked Questions',
                contactUs: 'Contact Us',
                
                // Common
                loading: 'Loading...',
                error: 'Error',
                noResults: 'No results found',
                readMore: 'Read More',
                saveForLater: 'Save for Later',
                share: 'Share',
                shareArticle: 'Share Article',
                shareTwitter: 'Share on Twitter',
                shareFacebook: 'Share on Facebook',
                shareLinkedin: 'Share on LinkedIn',
                copyLink: 'Copy Link',
                close: 'Close',
                copied: 'Copied!'
            },
            ko: {
                // Menu
                home: 'Ìôà',
                latest: 'ÏµúÏã†',
                trends: 'Ìä∏Î†åÎìú',
                saved: 'Ï†ÄÏû•Îê®',
                search: 'Í≤ÄÏÉâ',
                settings: 'ÏÑ§Ï†ï',
                help: 'ÎèÑÏõÄÎßê',
                sns: 'SNS Í≥µÏãù ÏóÖÎç∞Ïù¥Ìä∏',
                logout: 'Î°úÍ∑∏ÏïÑÏõÉ',
                login: 'Î°úÍ∑∏Ïù∏',
                signup: 'ÌöåÏõêÍ∞ÄÏûÖ',
                
                // Settings page
                settingsTitle: '‚öôÔ∏è ÏÑ§Ï†ï',
                language: 'Ïñ∏Ïñ¥',
                interfaceLanguage: 'Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ïñ∏Ïñ¥',
                autoTranslate: 'Í∏∞ÏÇ¨ ÏûêÎèô Î≤àÏó≠',
                priorityTopics: 'Ïö∞ÏÑ† Ï£ºÏ†ú',
                notifications: 'ÏïåÎ¶º',
                enableNotifications: 'ÏïåÎ¶º ÌôúÏÑ±Ìôî',
                theme: 'ÌÖåÎßà',
                darkMode: 'Îã§ÌÅ¨ Î™®Îìú',
                lightMode: 'ÎùºÏù¥Ìä∏ Î™®Îìú',
                clearCache: 'Ï∫êÏãú ÏÇ≠Ï†ú',
                clearSaved: 'Ï†ÄÏû•Îêú Í∏∞ÏÇ¨ ÏÇ≠Ï†ú',
                
                // Home page
                featuredNews: 'Ï∂îÏ≤ú Îâ¥Ïä§',
                tryNow: 'ÏßÄÍ∏à ÏãúÎèÑ',
                snsUpdates: 'SNS Í≥µÏãù ÏóÖÎç∞Ïù¥Ìä∏',
                hotTags: 'Ïù∏Í∏∞ ÌÉúÍ∑∏',
                recommendedAITools: 'Ï∂îÏ≤ú AI ÎèÑÍµ¨',
                aiTools: 'AI ÎèÑÍµ¨',
                allCompanies: 'Î™®Îì† ÌöåÏÇ¨',
                
                // Latest page
                latestNews: 'ÏµúÏã† Îâ¥Ïä§',
                
                // Saved page
                savedForLater: 'ÎÇòÏ§ëÏùÑ ÏúÑÌï¥ Ï†ÄÏû•Îê®',
                noSavedArticles: 'Ï†ÄÏû•Îêú Í∏∞ÏÇ¨Í∞Ä ÏóÜÏäµÎãàÎã§',
                
                // Search page
                searchPlaceholder: 'Í∏∞ÏÇ¨ Í≤ÄÏÉâ...',
                searchResults: 'Í≤ÄÏÉâ Í≤∞Í≥º',
                popularTags: 'Ïù∏Í∏∞ ÌÉúÍ∑∏',
                
                // Pagination
                prev: 'Ïù¥Ï†Ñ',
                next: 'Îã§Ïùå',
                
                // Help page
                helpTitle: '‚ùì ÎèÑÏõÄÎßê & ÏßÄÏõê',
                about: 'AI HOT NEWS ÏÜåÍ∞ú',
                faq: 'ÏûêÏ£º Î¨ªÎäî ÏßàÎ¨∏',
                contactUs: 'Î¨∏ÏùòÌïòÍ∏∞',
                
                // Pagination
                pageOf: 'ÌéòÏù¥ÏßÄ',
                
                // Articles
                noArticles: 'ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Í∏∞ÏÇ¨Í∞Ä ÏóÜÏäµÎãàÎã§',
                noArticlesFound: 'Í∏∞ÏÇ¨Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§',
                unknown: 'Ïïå Ïàò ÏóÜÏùå',
                unknownSource: 'Ïïå Ïàò ÏóÜÎäî Ï∂úÏ≤ò',
                
                // Common
                loading: 'Î°úÎî© Ï§ë...',
                error: 'Ïò§Î•ò',
                noResults: 'Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§',
                readMore: 'Îçî ÏùΩÍ∏∞',
                saveForLater: 'ÎÇòÏ§ëÏóê Ï†ÄÏû•',
                share: 'Í≥µÏú†',
                shareArticle: 'Í∏∞ÏÇ¨ Í≥µÏú†',
                shareTwitter: 'TwitterÏóêÏÑú Í≥µÏú†',
                shareFacebook: 'FacebookÏóêÏÑú Í≥µÏú†',
                shareLinkedin: 'LinkedInÏóêÏÑú Í≥µÏú†',
                copyLink: 'ÎßÅÌÅ¨ Î≥µÏÇ¨',
                close: 'Îã´Í∏∞',
                copied: 'Î≥µÏÇ¨Îê®!'
            },
            ja: {
                home: '„Éõ„Éº„É†',
                latest: 'ÊúÄÊñ∞',
                trends: '„Éà„É¨„É≥„Éâ',
                saved: '‰øùÂ≠òÊ∏à„Åø',
                search: 'Ê§úÁ¥¢',
                settings: 'Ë®≠ÂÆö',
                help: '„Éò„É´„Éó',
                sns: 'SNSÂÖ¨ÂºèÊõ¥Êñ∞',
                settingsTitle: '‚öôÔ∏è Ë®≠ÂÆö',
                language: 'Ë®ÄË™û',
                interfaceLanguage: '„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„ÇπË®ÄË™û',
                autoTranslate: 'Ë®ò‰∫ã„ÇíËá™ÂãïÁøªË®≥',
                featuredNews: '„Åä„Åô„Åô„ÇÅ„Éã„É•„Éº„Çπ',
                tryNow: 'Ë©¶„Åô',
                hotTags: '„Éõ„ÉÉ„Éà„Çø„Ç∞',
                aiTools: 'AI„ÉÑ„Éº„É´',
                latestNews: 'ÊúÄÊñ∞„Éã„É•„Éº„Çπ',
                searchResults: 'Ê§úÁ¥¢ÁµêÊûú',
                allCompanies: '„Åô„Åπ„Å¶„ÅÆ‰ºÅÊ•≠'
            },
            zh: {
                home: '‰∏ªÈ°µ',
                latest: 'ÊúÄÊñ∞',
                trends: 'Ë∂ãÂäø',
                saved: 'Â∑≤‰øùÂ≠ò',
                search: 'ÊêúÁ¥¢',
                settings: 'ËÆæÁΩÆ',
                help: 'Â∏ÆÂä©',
                sns: 'SNSÂÆòÊñπÊõ¥Êñ∞',
                settingsTitle: '‚öôÔ∏è ËÆæÁΩÆ',
                language: 'ËØ≠Ë®Ä',
                interfaceLanguage: 'ÁïåÈù¢ËØ≠Ë®Ä',
                autoTranslate: 'Ëá™Âä®ÁøªËØëÊñáÁ´†',
                featuredNews: 'Êé®ËçêÊñ∞Èóª',
                tryNow: 'Á´ãÂç≥Â∞ùËØï',
                hotTags: 'ÁÉ≠Èó®Ê†áÁ≠æ',
                aiTools: 'AIÂ∑•ÂÖ∑',
                latestNews: 'ÊúÄÊñ∞Êñ∞Èóª',
                searchResults: 'ÊêúÁ¥¢ÁªìÊûú',
                allCompanies: 'ÊâÄÊúâÂÖ¨Âè∏'
            }
        };

        // App State
        const app = {
            currentUser: null,
            currentPageName: 'home',
            currentLang: 'en',
            isDarkMode: true,
            allNews: [],
            savedNews: [],
            currentPage: 1,
            itemsPerPage: 10,

            // Initialize
            async init() {
                const indicator = document.getElementById('statusIndicator');
                try {
                    console.log('üöÄ AI HOT NEWS Initializing...');
                    
                    // Initialize Google Sign-In early
                    if (indicator) indicator.textContent = 'üîê Setting up Google OAuth...';
                    console.log('üîê Initializing Google OAuth...');
                    this.initializeGoogleSignIn();
                    
                    // Load saved language from localStorage
                    const savedLang = localStorage.getItem('language') || 'en';
                    this.currentLang = savedLang;
                    console.log(`üåê Loaded language: ${savedLang}`);
                    
                    // Update language select dropdown
                    const langSelect = document.getElementById('languageSelect');
                    if (langSelect) langSelect.value = savedLang;
                    
                    // Update UI to match saved language
                    this.updateUILanguage();
                    
                    if (indicator) indicator.textContent = 'üìç Setting up UI...';
                    console.log('newsAPI available:', typeof newsAPI !== 'undefined');
                    
                    // Setup event listeners with null checks
                    const hamburgerBtn = document.getElementById('hamburgerBtn');
                    const backBtn = document.getElementById('backBtn');
                    const drawerOverlay = document.getElementById('drawerOverlay');
                    const themeToggle = document.getElementById('themeToggle');
                    
                    console.log('DOM Elements found - hamburger:', !!hamburgerBtn, 'back:', !!backBtn, 'overlay:', !!drawerOverlay, 'theme:', !!themeToggle);
                    
                    if (hamburgerBtn) hamburgerBtn.addEventListener('click', () => this.toggleDrawer());
                    if (backBtn) backBtn.addEventListener('click', () => {
                        console.log('üîô Back button click event fired');
                        this.goBack();
                    });
                    if (drawerOverlay) drawerOverlay.addEventListener('click', () => this.closeDrawer());
                    if (themeToggle) themeToggle.addEventListener('click', () => this.toggleTheme());

                    // Add menu item click listeners
                    document.querySelectorAll('.menu-item').forEach((item, idx) => {
                        item.addEventListener('click', (e) => {
                            const route = item.getAttribute('data-route');
                            
                            console.log(`üìç Menu item clicked:`, {
                                index: idx,
                                route: route,
                                text: item.textContent.trim()
                            });
                            
                            if (route) {
                                e.stopPropagation();
                                console.log(`‚úÖ Navigating to: ${route}`);
                                this.navigate(route);
                                console.log(`‚úÖ Closing drawer`);
                                this.closeDrawer();
                            }
                        });
                        
                        // Add hover effect
                        item.style.cursor = 'pointer';
                    });

                    console.log(`‚úì Menu click listeners attached to ${document.querySelectorAll('.menu-item').length} items`);

                    // Load user data if logged in
                    if (indicator) indicator.textContent = 'üë§ Loading profile...';
                    console.log('Loading user profile...');
                    await this.loadUserProfile();
                    
                    // Load home content
                    if (indicator) indicator.textContent = 'üì∞ Loading news...';
                    console.log('Loading home news...');
                    await this.loadHomeNews();
                    
                    if (indicator) indicator.textContent = 'üì± Loading SNS...';
                    console.log('Loading SNS featured articles...');
                    await this.loadSNSFeaturedArticles();
                    
                    // Pre-load trends data in background
                    if (indicator) indicator.textContent = 'üî• Loading trends...';
                    this.loadTrends().catch(e => console.log('Trends preload error:', e));
                    
                    if (indicator) {
                        indicator.style.backgroundColor = '#4caf50';
                        indicator.textContent = '‚úÖ Ready!';
                        setTimeout(() => {
                            indicator.style.display = 'none';
                        }, 2000);
                    }
                    
                    console.log('‚úÖ AI HOT NEWS Ready!');
                } catch (error) {
                    console.error('üî¥ Initialization Error:', error);
                    console.error('Error stack:', error.stack);
                    if (indicator) {
                        indicator.style.backgroundColor = '#f44336';
                        indicator.textContent = `‚ùå Error: ${error.message}`;
                    }
                }
            },

            /**
             * Initialize Google Sign-In (Official Google Method)
             */
            initializeGoogleSignIn() {
                try {
                    console.log('üîê initializeGoogleSignIn called');
                    
                    // Wait for Google library
                    const checkGoogle = setInterval(() => {
                        if (window.google?.accounts?.id) {
                            clearInterval(checkGoogle);
                            console.log('‚úÖ Google Identity Services loaded');
                            
                            try {
                                const clientId = '819402691086-v0rb8jqe8p1ibt9pqhb0s7chfr8snnib.apps.googleusercontent.com';
                                
                                // Initialize globally
                                window.google.accounts.id.initialize({
                                    client_id: clientId,
                                    callback: (response) => {
                                        console.log('üìã Global Google callback');
                                        app.handleGoogleLoginResponse(response);
                                    }
                                });
                                
                                console.log('‚úÖ Google Sign-In globally initialized');
                            } catch (error) {
                                console.error('‚ùå Error initializing Google:', error);
                            }
                        }
                    }, 100);
                    
                    // Timeout after 10 seconds
                    setTimeout(() => clearInterval(checkGoogle), 10000);
                    
                } catch (error) {
                    console.error('‚ùå Error in initializeGoogleSignIn:', error);
                }
            },

            // Navigation
            navigate(page) {
                console.log(`üìç Navigate called with page: ${page}`);
                
                // Validate page
                if (!page || typeof page !== 'string') {
                    console.error(`‚ùå Invalid page parameter:`, page);
                    return;
                }
                
                // Hide all pages first
                const allPages = document.querySelectorAll('.page');
                console.log(`üîç Found ${allPages.length} pages to hide`);
                allPages.forEach(p => {
                    p.classList.remove('active');
                });
                
                // Update menu (only for pages in menu)
                if (page !== 'detail') {
                    document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
                    const menuItem = document.querySelector(`[data-route="${page}"]`);
                    if (menuItem) {
                        menuItem.classList.add('active');
                        console.log(`‚úÖ Menu item updated for: ${page}`);
                    } else {
                        console.log(`‚ÑπÔ∏è No menu item with data-route="${page}"`);
                    }
                }
                
                // Show selected page
                const pageEl = document.getElementById(`${page}Page`);
                if (pageEl) {
                    pageEl.classList.add('active');
                    console.log(`‚úÖ Page activated: ${page}Page`);
                    console.log(`‚úì Display style: ${window.getComputedStyle(pageEl).display}`);
                } else {
                    console.warn(`‚ö†Ô∏è Page element not found: ${page}Page`);
                    return;
                }
                
                this.currentPageName = page;

                // Close sidebar if open
                const drawer = document.getElementById('drawerOverlay');
                if (drawer && drawer.classList.contains('active')) {
                    drawer.classList.remove('active');
                    const sidebar = document.getElementById('sidebar');
                    if (sidebar) sidebar.classList.remove('active');
                    console.log('‚úÖ Sidebar closed');
                }

                // Show/hide back button
                const backBtn = document.getElementById('backBtn');
                const hamburgerBtn = document.getElementById('hamburgerBtn');
                
                if (backBtn && hamburgerBtn) {
                    if (page === 'detail') {
                        backBtn.style.display = 'flex';
                        hamburgerBtn.style.display = 'none';
                        console.log('‚úÖ Back button shown, hamburger hidden');
                    } else {
                        backBtn.style.display = 'none';
                        hamburgerBtn.style.display = 'flex';
                        console.log('‚úÖ Back button hidden, hamburger shown');
                    }
                } else {
                    console.warn('‚ö†Ô∏è Back or hamburger button not found', { backBtn: !!backBtn, hamburgerBtn: !!hamburgerBtn });
                }

                // Close drawer
                this.closeDrawer();

                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'auto' });

                // Load page-specific content
                if (page === 'home') {
                    this.currentPage = 1;
                    this.loadHomeNews();
                } else if (page === 'latest') {
                    this.currentPage = 1;
                    this.loadLatestNews();
                } else if (page === 'trends') {
                    this.loadTrends();
                } else if (page === 'sns') {
                    console.log('üìç SNS page loading...');
                    this.currentPage = 1;
                    this.loadSNSArticles();
                } else if (page === 'saved') {
                    this.currentPage = 1;
                    this.loadSavedNews();
                } else if (page === 'search') {
                    this.currentPage = 1;
                    this.loadSearchPage();
                } else if (page === 'settings') {
                    console.log('üìç Settings page - updating UI language');
                    // Update language-specific UI on settings page
                    this.updateUILanguage();
                } else if (page === 'help') {
                    console.log('üìç Help page - no data loading needed');
                } else if (page === 'detail') {
                    console.log('‚ÑπÔ∏è Detail page - no data loading needed');
                }
                
                console.log(`‚úÖ Navigation to "${page}" complete`);
            },

            // Back navigation for detail page
            goBack() {
                console.log('üîô Back button clicked', {
                    previousPageName: this.previousPageName,
                    currentPageName: this.currentPageName
                });
                
                // Go back to the page we came from
                const targetPage = this.previousPageName || 'home';
                console.log(`üìç Navigating to: ${targetPage}`);
                
                this.navigate(targetPage);
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                console.log('‚úÖ Back navigation complete');
            },

            // Drawer
            toggleDrawer() {
                document.getElementById('sidebar').classList.toggle('open');
                document.getElementById('drawerOverlay').classList.toggle('open');
            },

            closeDrawer() {
                document.getElementById('sidebar').classList.remove('open');
                document.getElementById('drawerOverlay').classList.remove('open');
            },

            // Theme
            toggleTheme() {
                this.isDarkMode = !this.isDarkMode;
                const html = document.documentElement;
                if (this.isDarkMode) {
                    html.classList.remove('light-mode');
                    document.getElementById('themeIcon').textContent = 'dark_mode';
                    this.showToast('Ïñ¥ÎëêÏö¥ ÌÖåÎßàÎ•º ÏÑ†ÌÉùÌïú ÎãπÏã†‚Ä¶ Í∞úÎ∞úÏûêÍµ∞Ïöî.');
                } else {
                    html.classList.add('light-mode');
                    document.getElementById('themeIcon').textContent = 'light_mode';
                    this.showToast('ÎπõÏùÑ ÏÑ†ÌÉùÌñàÍµ∞Ïöî. Ïù∏Í∞ÑÏ†ÅÏù∏ ÏÑ†ÌÉùÏûÖÎãàÎã§.');
                }
                localStorage.setItem('theme', this.isDarkMode ? 'dark' : 'light');
            },

            showToast(message) {
                let toastContainer = document.getElementById('toastContainer');
                if (!toastContainer) {
                    toastContainer = document.createElement('div');
                    toastContainer.id = 'toastContainer';
                    toastContainer.className = 'toast-container';
                    document.body.appendChild(toastContainer);
                }

                const toast = document.createElement('div');
                toast.className = 'toast';
                toast.textContent = message;
                toastContainer.appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 2000);
            },

            // Load home news
            async loadHomeNews() {
                try {
                    const container = document.getElementById('homeNewsList');
                    if (!container) {
                        console.error('‚ùå homeNewsList container not found');
                        return;
                    }
                    
                    container.innerHTML = '<div class="loading"><div class="spinner"></div>Loading Featured News...</div>';
                    
                    console.log('üì° Loading featured news from diverse sources...');
                    
                    let allNews = [];
                    
                    try {
                        if (!newsAPI) {
                            throw new Error('newsAPI is not defined');
                        }
                        
                        // Load more news items to display diverse sources
                        console.log('üì° Calling newsAPI.getLatestNews(1, 100)...');
                        const data = await newsAPI.getLatestNews(1, 100);
                        console.log('‚úì Got news data:', data);
                        console.log('‚úì Data type:', typeof data, 'Keys:', Object.keys(data || {}));
                        
                        allNews = data.news || [];
                        console.log('‚úì News array length:', allNews.length);
                        
                        if (!Array.isArray(allNews)) {
                            console.error('‚ùå News data is not an array:', typeof allNews, allNews);
                            throw new Error('Invalid news data format');
                        }
                    } catch (apiError) {
                        console.error('‚ö†Ô∏è API Error, using Mock data:', apiError.message);
                        // Use mock data if API fails
                        allNews = [
                            { id: 1, title: 'AI Innovation Breakthrough: GPT-5 Announced', summary: 'OpenAI announces the next generation of AI technology with improved reasoning capabilities.', source: 'TechNews', url: 'https://example.com/1', timestamp: new Date().toISOString(), content: 'OpenAI has announced GPT-5, the next major milestone in artificial intelligence. The model shows significant improvements in reasoning, accuracy, and understanding complex tasks.' },
                            { id: 2, title: 'Machine Learning Model Achieves 50% Performance Increase', summary: 'New ML architecture demonstrates unprecedented improvements in processing speed and accuracy.', source: 'AI Weekly', url: 'https://example.com/2', timestamp: new Date().toISOString(), content: 'Researchers at leading institutions have developed a new machine learning architecture that achieves a 50% performance improvement over previous models.' },
                            { id: 3, title: 'Google Releases Gemini 2.0 with Multimodal Capabilities', summary: 'Google introduces enhanced AI model supporting text, image, video, and audio processing.', source: 'TechCrunch', url: 'https://example.com/3', timestamp: new Date().toISOString(), content: 'Google has released Gemini 2.0, their most advanced AI model with improved multimodal capabilities.' },
                            { id: 4, title: 'Cloud Computing Market Grows 25% Year-over-Year', summary: 'Cloud services continue to dominate enterprise IT spending with strong growth trajectory.', source: 'CloudNews', url: 'https://example.com/4', timestamp: new Date().toISOString(), content: 'The cloud computing market continues to grow at double-digit rates as enterprises accelerate their digital transformation.' },
                            { id: 5, title: 'Data Analytics Technology Reaches New Heights', summary: 'Big data analysis tools enable unprecedented insights from massive datasets.', source: 'DataInnovate', url: 'https://example.com/5', timestamp: new Date().toISOString(), content: 'Advanced data analytics tools are enabling organizations to extract valuable insights from increasingly large datasets.' },
                            { id: 6, title: 'Anthropic Raises Billion Dollar Series C Funding', summary: 'AI safety-focused company secures major investment for continued research and development.', source: 'VCNews', url: 'https://example.com/6', timestamp: new Date().toISOString(), content: 'Anthropic, a leading AI safety company, has raised significant funding to accelerate its research initiatives.' },
                            { id: 7, title: 'Neural Networks Show Promise in Medical Diagnosis', summary: 'AI models demonstrate high accuracy in detecting diseases from medical imaging.', source: 'HealthTech', url: 'https://example.com/7', timestamp: new Date().toISOString(), content: 'Recent studies show that neural networks can effectively assist in medical diagnosis with remarkable accuracy.' },
                            { id: 8, title: 'Quantum Computing Makes Progress Toward Practical Applications', summary: 'Quantum computers demonstrate ability to solve complex optimization problems.', source: 'QuantumNews', url: 'https://example.com/8', timestamp: new Date().toISOString(), content: 'Quantum computing has advanced to the point where practical applications are becoming feasible.' },
                            { id: 9, title: 'Transformer Architecture Revolutionizes NLP', summary: 'Transformer-based models become standard for natural language processing tasks.', source: 'NLPResearch', url: 'https://example.com/9', timestamp: new Date().toISOString(), content: 'The transformer architecture has become the foundation for most modern natural language processing models.' },
                            { id: 10, title: 'Cybersecurity Threats Evolve as AI-Powered Attacks Increase', summary: 'Organizations face new security challenges from AI-enhanced cyber threats.', source: 'SecurityNews', url: 'https://example.com/10', timestamp: new Date().toISOString(), content: 'As AI becomes more sophisticated, cybersecurity threats are evolving with AI-powered attacks.' },
                            { id: 11, title: 'Edge AI Brings Intelligence to IoT Devices', summary: 'Processing AI models directly on edge devices enables real-time decision making.', source: 'IoTDaily', url: 'https://example.com/11', timestamp: new Date().toISOString(), content: 'Edge AI is enabling faster, more efficient processing of data on IoT devices.' },
                            { id: 12, title: 'Python Dominates as Preferred Language for AI Development', summary: 'Python ecosystem provides comprehensive tools for machine learning and AI projects.', source: 'DevTools', url: 'https://example.com/12', timestamp: new Date().toISOString(), content: 'Python has become the dominant programming language for AI and machine learning development.' }
                        ];
                    }
                    
                    // Sort by popularity (view_count + click_count) and recency
                    allNews.sort((a, b) => {
                        const scoreA = (a.view_count || a.stats?.views || 0) + (a.click_count || a.stats?.clicks || 0) * 2;
                        const scoreB = (b.view_count || b.stats?.views || 0) + (b.click_count || b.stats?.clicks || 0) * 2;
                        
                        // Primary sort: popularity score
                        if (scoreA !== scoreB) {
                            return scoreB - scoreA;
                        }
                        
                        // Secondary sort: recency
                        const dateA = new Date(a.created_at || a.timestamp);
                        const dateB = new Date(b.created_at || b.timestamp);
                        return dateB - dateA;
                    });
                    
                    // Remove duplicates by source and title to ensure diversity
                    const uniqueNews = [];
                    const sourceMap = new Map();
                    
                    for (const news of allNews) {
                        const source = news.source || 'Unknown';
                        
                        if (!sourceMap.has(source)) {
                            sourceMap.set(source, 0);
                        }
                        
                        // Allow up to 2 articles per source for diversity
                        const sourceCount = sourceMap.get(source);
                        if (sourceCount < 2) {
                            uniqueNews.push(news);
                            sourceMap.set(source, sourceCount + 1);
                        }
                        
                        // Stop when we have enough articles
                        if (uniqueNews.length >= 12) break;
                    }
                    
                    this.allNews = uniqueNews;
                    this.currentPage = 1;
                    console.log('üé® About to render news...');
                    this.renderNews(this.allNews, 'homeNewsList', 'homePagination');
                    console.log('‚úÖ News rendered');
                    
                    console.log('üî• About to render hot tags...');
                    this.renderHotTags(this.allNews);
                    console.log('‚úÖ Hot tags rendered');
                    
                    // Load AI Tools
                    console.log('ü§ñ About to load AI Tools...');
                    this.loadAITools();
                    
                    console.log('‚úì Home news loaded successfully from', new Set(this.allNews.map(n => n.source)).size, 'different sources');
                } catch (error) {
                    console.error('üî¥ Home News Error:', error);
                    console.error('Stack:', error.stack);
                    const container = document.getElementById('homeNewsList');
                    if (container) {
                        container.innerHTML = `<div class="empty-state" style="color: #ff6b6b;"><strong>‚ö†Ô∏è Error loading news:</strong><br>${error.message}</div>`;
                    }
                }
            },

            // Load latest news
            async loadLatestNews() {
                try {
                    const container = document.getElementById('latestNewsList');
                    if (!container) {
                        console.error('‚ùå latestNewsList container not found');
                        return;
                    }
                    
                    container.innerHTML = '<div class="loading"><div class="spinner"></div>Loading...</div>';
                    
                    let allNews = [];
                    try {
                        const data = await newsAPI.getLatestNews(1, 50);
                        allNews = data.news || [];
                        console.log('‚úì Latest news loaded:', allNews.length);
                    } catch (apiError) {
                        console.warn('‚ö†Ô∏è API Error, using Mock data:', apiError.message);
                        // Use mock data if API fails
                        allNews = [
                            { id: 1, title: 'AI Innovation Breakthrough: GPT-5 Announced', summary: 'OpenAI announces the next generation of AI technology with improved reasoning capabilities.', source: 'TechNews', url: 'https://example.com/1', timestamp: new Date().toISOString(), content: 'OpenAI has announced GPT-5, the next major milestone in artificial intelligence.' },
                            { id: 2, title: 'Machine Learning Model Achieves 50% Performance Increase', summary: 'New ML architecture demonstrates unprecedented improvements in processing speed and accuracy.', source: 'AI Weekly', url: 'https://example.com/2', timestamp: new Date().toISOString(), content: 'Researchers have developed a new machine learning architecture that achieves a 50% performance improvement.' },
                            { id: 3, title: 'Google Releases Gemini 2.0 with Multimodal Capabilities', summary: 'Google introduces enhanced AI model supporting text, image, video, and audio processing.', source: 'TechCrunch', url: 'https://example.com/3', timestamp: new Date().toISOString(), content: 'Google has released Gemini 2.0, their most advanced AI model with improved multimodal capabilities.' },
                            { id: 4, title: 'Cloud Computing Market Grows 25% Year-over-Year', summary: 'Cloud services continue to dominate enterprise IT spending with strong growth trajectory.', source: 'CloudNews', url: 'https://example.com/4', timestamp: new Date().toISOString(), content: 'The cloud computing market continues to grow at double-digit rates.' },
                            { id: 5, title: 'Data Analytics Technology Reaches New Heights', summary: 'Big data analysis tools enable unprecedented insights from massive datasets.', source: 'DataInnovate', url: 'https://example.com/5', timestamp: new Date().toISOString(), content: 'Advanced data analytics tools are enabling organizations to extract valuable insights.' },
                            { id: 6, title: 'Anthropic Raises Billion Dollar Series C Funding', summary: 'AI safety-focused company secures major investment for continued research and development.', source: 'VCNews', url: 'https://example.com/6', timestamp: new Date().toISOString(), content: 'Anthropic has raised significant funding to accelerate its research initiatives.' },
                            { id: 7, title: 'Neural Networks Show Promise in Medical Diagnosis', summary: 'AI models demonstrate high accuracy in detecting diseases from medical imaging.', source: 'HealthTech', url: 'https://example.com/7', timestamp: new Date().toISOString(), content: 'Recent studies show that neural networks can effectively assist in medical diagnosis.' },
                            { id: 8, title: 'Quantum Computing Makes Progress Toward Practical Applications', summary: 'Quantum computers demonstrate ability to solve complex optimization problems.', source: 'QuantumNews', url: 'https://example.com/8', timestamp: new Date().toISOString(), content: 'Quantum computing has advanced to the point where practical applications are becoming feasible.' },
                            { id: 9, title: 'Transformer Architecture Revolutionizes NLP', summary: 'Transformer-based models become standard for natural language processing tasks.', source: 'NLPResearch', url: 'https://example.com/9', timestamp: new Date().toISOString(), content: 'The transformer architecture has become the foundation for most modern natural language processing models.' },
                            { id: 10, title: 'Cybersecurity Threats Evolve as AI-Powered Attacks Increase', summary: 'Organizations face new security challenges from AI-enhanced cyber threats.', source: 'SecurityNews', url: 'https://example.com/10', timestamp: new Date().toISOString(), content: 'As AI becomes more sophisticated, cybersecurity threats are evolving with AI-powered attacks.' },
                            { id: 11, title: 'Edge AI Brings Intelligence to IoT Devices', summary: 'Processing AI models directly on edge devices enables real-time decision making.', source: 'IoTDaily', url: 'https://example.com/11', timestamp: new Date().toISOString(), content: 'Edge AI is enabling faster, more efficient processing of data on IoT devices.' },
                            { id: 12, title: 'Python Dominates as Preferred Language for AI Development', summary: 'Python ecosystem provides comprehensive tools for machine learning and AI projects.', source: 'DevTools', url: 'https://example.com/12', timestamp: new Date().toISOString(), content: 'Python has become the dominant programming language for AI and machine learning development.' }
                        ];
                    }
                    
                    if (!Array.isArray(allNews) || allNews.length === 0) {
                        console.warn('‚ö†Ô∏è No news available, showing empty state');
                        container.innerHTML = '<div class="empty-state">No news available</div>';
                        return;
                    }
                    
                    this.allNews = allNews;
                    this.currentPage = 1;
                    this.renderNews(this.allNews, 'latestNewsList', 'latestPagination');
                    console.log('‚úÖ Latest news page loaded successfully');
                } catch (error) {
                    console.error('‚ùå Error in loadLatestNews:', error);
                    const container = document.getElementById('latestNewsList');
                    if (container) {
                        container.innerHTML = `<div class="empty-state">Error loading news</div>`;
                    }
                }
            },

            // Load trends
            async loadTrends() {
                try {
                    const container = document.getElementById('trendsList');
                    container.innerHTML = '<div class="loading"><div class="spinner"></div>Loading trending topics...</div>';
                    
                    // Try to get hot topics first
                    let trendingData = null;
                    try {
                        trendingData = await newsAPI.getHotTopics(15);
                    } catch (e) {
                        console.log('Hot topics API error, using fallback data');
                    }

                    // Fallback: use keywords from hot tags
                    if (!trendingData || !trendingData.topics) {
                        const hotTagsKeywords = ['AI', 'Machine Learning', 'Cloud', 'Data', 'Security', 'API', 
                                                'DevOps', 'Python', 'JavaScript', 'LLM', 'GPT', 'Neural', 
                                                'Algorithm', 'Deep Learning', 'Tech', 'Innovation', 'Software', 
                                                'Web', 'Mobile', 'Enterprise'];
                        trendingData = {
                            topics: hotTagsKeywords.map((name, idx) => ({
                                name: name,
                                weight: 100 - (idx * 5)
                            }))
                        };
                    }

                    if (!trendingData.topics || trendingData.topics.length === 0) {
                        container.innerHTML = '<div class="empty-state">No trending topics available</div>';
                        return;
                    }

                    // Create trending topics with better UI
                    const html = trendingData.topics.map((t, idx) => {
                        const rank = idx + 1;
                        const rankEmoji = rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : rank === 3 ? 'ü•â' : `${rank}.`;
                        const weight = t.weight || 100 - (idx * 5);
                        
                        return `
                            <div style="padding: 15px; background: var(--color-surface-light); border: 1px solid var(--color-border); 
                                        border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: all 0.3s ease;"
                                 onmouseover="this.style.background='var(--color-surface)'; this.style.borderColor='var(--color-accent)';"
                                 onmouseout="this.style.background='var(--color-surface-light)'; this.style.borderColor='var(--color-border)';"
                                 onclick="document.getElementById('searchInput').value='${t.name}'; app.navigate('search'); app.search();">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <span style="font-size: 24px; min-width: 40px;">${rankEmoji}</span>
                                    <div style="flex: 1;">
                                        <h4 style="margin: 0 0 4px 0; font-size: 16px; font-weight: bold; color: var(--color-text);">
                                            #${t.name}
                                        </h4>
                                        <div style="display: flex; gap: 8px; font-size: 12px; color: var(--color-text-secondary);">
                                            <span>üìä Weight: ${weight}</span>
                                        </div>
                                    </div>
                                    <span style="font-size: 18px;">üî•</span>
                                </div>
                            </div>
                        `;
                    }).join('');

                    container.innerHTML = html;
                } catch (error) {
                    console.error('Error loading trends:', error);
                    document.getElementById('trendsList').innerHTML = `<div class="empty-state">Error loading trends: ${error.message}</div>`;
                }
            },

            // Load saved news
            async loadSavedNews() {
                try {
                    const container = document.getElementById('savedNewsList');
                    
                    // Load "Save for Later" articles from localStorage
                    const savedForLater = JSON.parse(localStorage.getItem('savedForLater') || '[]');
                    
                    if (!savedForLater.length) {
                        container.innerHTML = '<div class="empty-state">No saved articles</div>';
                        document.getElementById('savedPagination').innerHTML = '';
                        return;
                    }

                    this.savedNews = savedForLater;
                    this.renderNews(this.savedNews, 'savedNewsList', 'savedPagination');
                } catch (error) {
                    document.getElementById('savedNewsList').innerHTML = `<div class="empty-state">Error loading saved articles</div>`;
                }
            },

            // Render news
            renderNews(newsArray, containerId, paginationId) {
                console.log(`üìä renderNews called: containerId=${containerId}, paginationId=${paginationId}, newsArray length=${newsArray?.length || 0}`);
                
                const container = document.getElementById(containerId);
                if (!container) {
                    console.error(`‚ùå Container not found: ${containerId}`);
                    return;
                }
                
                if (!newsArray || !Array.isArray(newsArray)) {
                    console.error(`‚ùå Invalid news array for ${containerId}`, newsArray);
                    container.innerHTML = `<div class="empty-state">${this.t('noArticles')}</div>`;
                    return;
                }
                
                const totalPages = Math.ceil(newsArray.length / this.itemsPerPage);
                const start = (this.currentPage - 1) * this.itemsPerPage;
                const end = start + this.itemsPerPage;
                const paginatedNews = newsArray.slice(start, end);

                console.log(`üìä Rendering news: array length=${newsArray.length}, totalPages=${totalPages}, currentPage=${this.currentPage}, paginatedNews count=${paginatedNews.length}`);

                if (!paginatedNews.length) {
                    container.innerHTML = `<div class="empty-state">${this.t('noArticlesFound')}</div>`;
                    return;
                }

                try {
                    const articlesForThisPage = paginatedNews.filter(a => a); // Filter out nulls
                    console.log(`üî¥ [renderNews] Processing ${articlesForThisPage.length} articles`);
                    
                    // Store articles globally for click handlers to access
                    if (!window.articlesByContainerId) {
                        window.articlesByContainerId = {};
                    }
                    window.articlesByContainerId[containerId] = articlesForThisPage;
                    console.log(`üî¥ [renderNews] Stored articles in window.articlesByContainerId[${containerId}]`);
                    
                    container.innerHTML = articlesForThisPage.map((article, idx) => {
                        const articleId = `news-${containerId}-${idx}`;
                        
                        return `
                            <div class="news-card" id="${articleId}" data-article-index="${idx}" data-container="${containerId}" style="cursor:pointer;">
                                <h3>${article.title || this.t('unknown')}</h3>
                                <p>${article.summary || this.t('noResults')}</p>
                                <div class="news-meta">
                                    <span class="news-source">${article.source || this.t('unknownSource')}</span>
                                    <button class="bookmark-btn" onclick="event.stopPropagation(); app.toggleBookmark('${article.id}')">üîñ</button>
                                </div>
                            </div>
                        `;
                    }).join('');
                    
                    console.log(`‚úÖ HTML rendered for ${containerId} (${articlesForThisPage.length} articles)`);
                    
                    // Add click handlers for news cards
                    setTimeout(() => {
                        console.log(`üîç Looking for cards in container: #${containerId}`);
                        const cards = container.querySelectorAll('.news-card');
                        console.log(`üìå Found ${cards.length} news cards to attach listeners`);
                        
                        cards.forEach((card, idx) => {
                            card.addEventListener('click', function(e) {
                                console.log(`üñ±Ô∏è Card ${idx} clicked on container ${containerId}`);
                                
                                // Don't navigate if clicking bookmark button
                                if (e.target.closest('.bookmark-btn')) {
                                    console.log('üìå Bookmark button clicked, skipping navigation');
                                    return;
                                }
                                
                                try {
                                    const containerName = this.getAttribute('data-container');
                                    const cardIdx = parseInt(this.getAttribute('data-article-index'));
                                    
                                    console.log(`üî¥ [click] containerName=${containerName}, cardIdx=${cardIdx}`);
                                    console.log(`üî¥ [click] Available containers:`, Object.keys(window.articlesByContainerId || {}));
                                    
                                    if (!window.articlesByContainerId || !window.articlesByContainerId[containerName]) {
                                        console.error('‚ùå Articles not found for container:', containerName);
                                        return;
                                    }
                                    
                                    const article = window.articlesByContainerId[containerName][cardIdx];
                                    if (!article) {
                                        console.error(`‚ùå Article not found at index ${cardIdx}`);
                                        return;
                                    }
                                    
                                    console.log('‚úÖ Article found:', article.title);
                                    app.showArticleDetail(article);
                                } catch (err) {
                                    console.error('‚ùå Error in click handler:', err);
                                    console.error('‚ùå Stack:', err.stack);
                                }
                            });
                        });
                        
                        console.log(`‚úÖ Click handlers attached to all ${cards.length} cards`);
                    }, 0);
                    
                } catch (error) {
                    console.error(`‚ùå Error rendering news HTML for ${containerId}:`, error);
                    container.innerHTML = `<div class="empty-state">${this.t('error')}</div>`;
                    return;
                }

                // Render pagination
                this.renderPagination(totalPages, paginationId);
            },

            // Render pagination separately
            renderPagination(totalPages, paginationId) {
                if (!paginationId) {
                    console.log('‚ùå No pagination ID provided');
                    return;
                }

                const paginationElement = document.getElementById(paginationId);
                if (!paginationElement) {
                    console.error(`‚ùå Pagination element not found: ${paginationId}`);
                    return;
                }

                if (totalPages <= 1) {
                    console.log(`‚è≠Ô∏è Only 1 page (totalPages=${totalPages}), no pagination UI needed`);
                    paginationElement.innerHTML = '';
                    return;
                }

                console.log(`üìÑ Rendering pagination: totalPages=${totalPages}, currentPage=${this.currentPage}, paginationId=${paginationId}`);

                // Î≤àÏó≠Îêú ÌÖçÏä§Ìä∏ ÎØ∏Î¶¨ Ï§ÄÎπÑ
                const prevText = this.t('prev');
                const nextText = this.t('next');
                const pageOfText = this.t('pageOf');

                let html = '<div class="pagination">';
                
                // Previous button
                if (this.currentPage > 1) {
                    html += `<button class="pagination-prev" data-action="prev">‚Üê ${prevText}</button>`;
                } else {
                    html += `<button disabled>‚Üê ${prevText}</button>`;
                }
                
                // Page numbers
                for (let i = 1; i <= totalPages; i++) {
                    if (i === this.currentPage) {
                        html += `<button class="active">${i}</button>`;
                    } else {
                        html += `<button class="pagination-page" data-page="${i}">${i}</button>`;
                    }
                }
                
                // Next button
                if (this.currentPage < totalPages) {
                    html += `<button class="pagination-next" data-action="next">${nextText} ‚Üí</button>`;
                } else {
                    html += `<button disabled>${nextText} ‚Üí</button>`;
                }
                
                html += '</div>';
                html += `<div style="text-align: center; color: var(--color-text-secondary); margin-top: 10px; font-size: 12px;">${pageOfText} ${this.currentPage} of ${totalPages}</div>`;
                
                paginationElement.innerHTML = html;
                
                // Add event listeners for pagination buttons
                const prevBtn = paginationElement.querySelector('.pagination-prev');
                const nextBtn = paginationElement.querySelector('.pagination-next');
                const pageButtons = paginationElement.querySelectorAll('.pagination-page');
                
                if (prevBtn) {
                    prevBtn.addEventListener('click', () => {
                        console.log('üìç Prev button clicked');
                        this.prevPage();
                    });
                }
                
                if (nextBtn) {
                    nextBtn.addEventListener('click', () => {
                        console.log('üìç Next button clicked');
                        this.nextPage();
                    });
                }
                
                pageButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const page = parseInt(btn.dataset.page);
                        console.log(`üìç Page ${page} button clicked`);
                        this.goToPage(page);
                    });
                });
                
                console.log(`‚úÖ Pagination UI rendered (${totalPages} pages)`);
            },

            // Render HOT TAGS
            renderHotTags(newsArray) {
                const tagFrequency = {};
                const hotTagsKeywords = ['AI', 'Machine Learning', 'Cloud', 'Data', 'Security', 'API', 'DevOps', 'Python', 'JavaScript', 'LLM', 'GPT', 'Neural', 'Algorithm', 'Deep Learning', 'Tech', 'Innovation', 'Software', 'Web', 'Mobile', 'Enterprise', 'Network', 'Database', 'Framework', 'Platform', 'Service', 'Artificial Intelligence', 'DeepMind', 'OpenAI', 'Anthropic', 'Google', 'Meta', 'Microsoft', 'Azure'];
                
                console.log(`üìä renderHotTags called with ${newsArray?.length || 0} articles`);
                
                if (!newsArray || newsArray.length === 0) {
                    console.warn('‚ö†Ô∏è No news articles provided for HOT TAGS');
                    // Use more default tags
                    const defaultTags = [
                        ['AI', 12],
                        ['LLM', 11],
                        ['GPT', 10],
                        ['Machine Learning', 9],
                        ['Deep Learning', 8],
                        ['Neural Network', 8],
                        ['Cloud', 7],
                        ['Data', 7],
                        ['OpenAI', 7],
                        ['Anthropic', 6],
                        ['Google', 6],
                        ['Meta', 6],
                        ['Innovation', 6],
                        ['Algorithm', 5],
                        ['Security', 5],
                        ['Python', 5],
                        ['Transformer', 5],
                        ['API', 5],
                        ['Web3', 4],
                        ['DevOps', 4],
                        ['Quantum Computing', 4],
                        ['Blockchain', 4],
                        ['IoT', 4],
                        ['5G', 3],
                        ['Edge AI', 3],
                        ['Robotics', 3],
                        ['NLP', 3],
                        ['Computer Vision', 3],
                        ['JavaScript', 3],
                        ['Framework', 3],
                        ['Platform', 2],
                        ['Microservices', 2],
                        ['Database', 2],
                        ['Enterprise', 2],
                        ['Network', 2],
                        ['Software', 2],
                        ['Mobile', 2],
                        ['Web', 2],
                        ['Service', 1],
                        ['Technology', 1]
                    ];
                    
                    const hotTagsElement = document.getElementById('hotTags');
                    if (hotTagsElement) {
                        hotTagsElement.innerHTML = defaultTags.map(([tag, count]) => 
                            `<span class="news-source" style="padding: 8px 16px; cursor: pointer; transition: all 0.3s ease; position: relative; background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 20px; display: inline-block;" 
                                    onmouseover="this.style.background='var(--color-accent)'; this.style.color='white';"
                                    onmouseout="this.style.background='var(--color-surface-light)'; this.style.color='var(--color-text)';"
                                    onclick="app.navigate('search'); document.getElementById('searchInput').value='${tag}'; app.search();"
                                    title="Appears ${count} times">
                                #${tag} 
                                <span style="font-size: 11px; opacity: 0.7; margin-left: 4px;">(${count})</span>
                            </span>`
                        ).join('');
                    }
                    return;
                }
                
                // Count tag frequency from news titles, summaries, and tags
                newsArray.forEach(article => {
                    const text = (article.title + ' ' + article.summary).toLowerCase();
                    const tags = article.tags || [];
                    
                    hotTagsKeywords.forEach(keyword => {
                        if (text.includes(keyword.toLowerCase())) {
                            tagFrequency[keyword] = (tagFrequency[keyword] || 0) + 1;
                        }
                    });
                    
                    // Also count explicit tags
                    tags.forEach(tag => {
                        if (tag) {
                            tagFrequency[tag] = (tagFrequency[tag] || 0) + 1;
                        }
                    });
                });

                // Sort by frequency and get top 20
                const topTags = Object.entries(tagFrequency)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 20);

                console.log(`üî• Hot tags with frequency:`, topTags);

                // Use more default tags if no tags calculated
                const tagsToDisplay = topTags.length > 0 ? topTags : [
                    ['AI', 12],
                    ['LLM', 11],
                    ['GPT', 10],
                    ['Machine Learning', 9],
                    ['Deep Learning', 8],
                    ['Neural Network', 8],
                    ['Cloud', 7],
                    ['Data', 7],
                    ['OpenAI', 7],
                    ['Anthropic', 6],
                    ['Google', 6],
                    ['Meta', 6],
                    ['Innovation', 6],
                    ['Algorithm', 5],
                    ['Security', 5],
                    ['Python', 5],
                    ['Transformer', 5],
                    ['API', 5],
                    ['Web3', 4],
                    ['DevOps', 4],
                    ['Quantum Computing', 4],
                    ['Blockchain', 4],
                    ['IoT', 4],
                    ['5G', 3],
                    ['Edge AI', 3],
                    ['Robotics', 3],
                    ['NLP', 3],
                    ['Computer Vision', 3],
                    ['JavaScript', 3],
                    ['Framework', 3],
                    ['Platform', 2],
                    ['Microservices', 2],
                    ['Database', 2],
                    ['Enterprise', 2],
                    ['Network', 2],
                    ['Software', 2],
                    ['Mobile', 2],
                    ['Web', 2],
                    ['Service', 1],
                    ['Technology', 1]
                ];

                const hotTagsElement = document.getElementById('hotTags');
                if (hotTagsElement) {
                    hotTagsElement.innerHTML = tagsToDisplay.map(([tag, count]) => 
                        `<span class="news-source" style="padding: 8px 16px; cursor: pointer; transition: all 0.3s ease; position: relative; background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 20px; display: inline-block; margin: 4px;" 
                                onmouseover="this.style.background='var(--color-accent)'; this.style.color='white';"
                                onmouseout="this.style.background='var(--color-surface-light)'; this.style.color='var(--color-text)';"
                                onclick="app.navigate('search'); document.getElementById('searchInput').value='${tag}'; setTimeout(() => app.search(), 100);"
                                title="Appears ${count} times">
                            #${tag} 
                            <span style="font-size: 11px; opacity: 0.7; margin-left: 4px;">(${count})</span>
                        </span>`
                    ).join('');
                    console.log(`‚úÖ HOT TAGS rendered with ${tagsToDisplay.length} tags`);
                } else {
                    console.error('‚ùå hotTags element not found');
                }
            },

            // Load AI Tools
            async loadAITools() {
                try {
                    let tools = [];
                    let categories = [];
                    
                    try {
                        const data = await newsAPI.getAITools('all');
                        tools = data.tools || [];
                        categories = data.categories || [];
                    } catch (apiError) {
                        console.warn('‚ö†Ô∏è AI Tools API Error, using Mock data:', apiError.message);
                        // Mock categories
                        categories = [
                            { id: 'all', name: 'All', icon: 'üåü' },
                            { id: 'text', name: 'Text', icon: 'üìù' },
                            { id: 'image', name: 'Image', icon: 'üñºÔ∏è' },
                            { id: 'code', name: 'Code', icon: 'üíª' },
                            { id: 'voice', name: 'Voice', icon: 'üéôÔ∏è' }
                        ];
                        // Mock tools with more items
                        tools = [
                            { id: 1, name: 'ChatGPT', category: 'text', description: 'Advanced AI-powered conversational model with exceptional reasoning capabilities', url: 'https://chatgpt.com', icon: 'ü§ñ' },
                            { id: 2, name: 'DALL-E 3', category: 'image', description: 'Cutting-edge image generation AI creating photorealistic images from text descriptions', url: 'https://openai.com/dall-e', icon: 'üé®' },
                            { id: 3, name: 'GitHub Copilot', category: 'code', description: 'AI-powered code completion assistant helping developers write code faster', url: 'https://github.com/copilot', icon: '‚ö°' },
                            { id: 4, name: 'Gemini', category: 'text', description: 'Google\'s multimodal AI model with advanced understanding across text, images, and more', url: 'https://gemini.google.com', icon: 'üîç' },
                            { id: 5, name: 'Midjourney', category: 'image', description: 'Premium AI image generation with artistic and creative capabilities', url: 'https://midjourney.com', icon: 'üé≠' },
                            { id: 6, name: 'Claude', category: 'text', description: 'Anthropic\'s advanced AI assistant with superior reasoning and safety features', url: 'https://claude.ai', icon: 'üß†' },
                            { id: 7, name: 'Copilot Pro', category: 'code', description: 'Microsoft\'s advanced code generation tool with enterprise-grade capabilities', url: 'https://copilot.microsoft.com', icon: 'üíº' },
                            { id: 8, name: 'Stable Diffusion', category: 'image', description: 'Open-source image generation model providing accessible AI art creation', url: 'https://stability.ai', icon: 'üåä' },
                            { id: 9, name: 'Whisper', category: 'voice', description: 'OpenAI\'s robust speech recognition model supporting multiple languages', url: 'https://openai.com/research/whisper', icon: 'üéß' },
                            { id: 10, name: 'Bard', category: 'text', description: 'Google\'s conversational AI combining search and reasoning capabilities', url: 'https://bard.google.com', icon: 'üî∑' },
                            { id: 11, name: 'Copilot X', category: 'code', description: 'Next-generation code completion with advanced pattern recognition and suggestions', url: 'https://github.com/features/copilot/x', icon: 'üöÄ' },
                            { id: 12, name: 'Runway ML', category: 'image', description: 'AI video generation platform enabling creators to produce dynamic content', url: 'https://runwayml.com', icon: 'üé¨' },
                            { id: 13, name: 'Perplexity AI', category: 'text', description: 'Search-powered AI assistant providing accurate information with source citations', url: 'https://perplexity.ai', icon: 'üîé' },
                            { id: 14, name: 'Codeium', category: 'code', description: 'Free AI coding assistant offering code generation and intelligent completions', url: 'https://codeium.com', icon: '‚öôÔ∏è' },
                            { id: 15, name: 'Eleven Labs', category: 'voice', description: 'High-quality AI voice synthesis with natural-sounding speech generation', url: 'https://elevenlabs.io', icon: 'üîä' },
                            { id: 16, name: 'Leonardo AI', category: 'image', description: 'AI-powered image generation and editing with fine-grained control options', url: 'https://leonardo.ai', icon: '‚ú®' },
                            { id: 17, name: 'Grammarly', category: 'text', description: 'AI-powered writing assistant improving clarity, grammar, and communication style', url: 'https://grammarly.com', icon: '‚úçÔ∏è' },
                            { id: 18, name: 'Jasper', category: 'text', description: 'AI content creation tool helping marketers and writers produce engaging content efficiently', url: 'https://jasper.ai', icon: 'üìÑ' },
                            { id: 19, name: 'Replit', category: 'code', description: 'AI-integrated coding platform enabling collaborative development and rapid prototyping', url: 'https://replit.com', icon: 'üíª' },
                            { id: 20, name: 'HeyGen', category: 'voice', description: 'AI video generation tool creating professional videos with AI avatars and voices', url: 'https://heygen.com', icon: 'üé•' }
                        ];
                    }
                    
                    this.aiTools = tools;
                    this.aiToolCategories = categories;
                    
                    this.renderAIToolCategories();
                    this.renderAITools(this.aiTools);
                    
                    console.log('ü§ñ AI Tools loaded:', this.aiTools);
                } catch (error) {
                    console.error('üî¥ AI Tools Error:', error);
                    const container = document.getElementById('aiToolsGrid');
                    if (container) {
                        container.innerHTML = `<div class="empty-state">Error loading AI tools</div>`;
                    }
                }
            },

            // Render AI Tool Category Filter
            renderAIToolCategories() {
                const filterContainer = document.getElementById('toolsCategoryFilter');
                if (!filterContainer || !this.aiToolCategories) return;

                filterContainer.innerHTML = this.aiToolCategories.map(category => 
                    `<button style="padding: 8px 16px; border-radius: 20px; border: 1px solid var(--color-border); background: ${category.id === 'all' ? 'var(--color-accent)' : 'var(--color-surface-light)'}; color: var(--color-text); cursor: pointer; transition: all 0.3s ease; font-size: 13px;" 
                            onclick="app.filterAITools('${category.id}')"
                            id="toolsFilter-${category.id}">
                        ${category.icon} ${category.name}
                    </button>`
                ).join('');
            },

            // Filter AI Tools by category
            filterAITools(category) {
                let filtered = this.aiTools;
                if (category !== 'all') {
                    filtered = this.aiTools.filter(tool => tool.category === category);
                }

                // Update button styles
                const buttons = document.querySelectorAll('[id^="toolsFilter-"]');
                buttons.forEach(btn => {
                    const btnCategory = btn.id.replace('toolsFilter-', '');
                    if (btnCategory === category) {
                        btn.style.background = 'var(--color-accent)';
                        btn.style.color = '#ffffff';
                    } else {
                        btn.style.background = 'var(--color-surface-light)';
                        btn.style.color = 'var(--color-text)';
                    }
                });

                this.renderAITools(filtered);
            },

            // Render AI Tools Grid
            renderAITools(tools) {
                const container = document.getElementById('aiToolsGrid');
                if (!container) return;

                if (!tools || tools.length === 0) {
                    container.innerHTML = '<div class="empty-state">No AI tools available</div>';
                    return;
                }

                container.innerHTML = tools.map((tool, idx) => 
                    `<div class="ai-tool-card" data-tool-index="${idx}" style="background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 8px; padding: 16px; cursor: pointer; transition: all 0.3s ease; display: flex; flex-direction: column; gap: 12px;"
                          onmouseover="this.style.background='var(--color-surface)'; this.style.borderColor='var(--color-accent)'; this.style.transform='translateY(-4px)';"
                          onmouseout="this.style.background='var(--color-surface-light)'; this.style.borderColor='var(--color-border)'; this.style.transform='translateY(0)';">
                        
                        <!-- Tool Header -->
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 28px;">${tool.icon || 'ü§ñ'}</span>
                            <div style="flex: 1;">
                                <h4 style="font-weight: bold; font-size: 15px; color: var(--color-text); margin: 0;">${tool.name}</h4>
                                <div style="display: inline-block; padding: 4px 10px; background: var(--color-accent); border-radius: 12px; font-size: 11px; color: var(--color-text); margin-top: 4px;">
                                    ${tool.category.charAt(0).toUpperCase() + tool.category.slice(1)}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tool Description -->
                        <p style="font-size: 13px; color: var(--color-text-secondary); margin: 0; line-height: 1.4;">
                            ${tool.description}
                        </p>
                        
                        <!-- Try Now Button -->
                        <button class="ai-tool-try-btn" style="padding: 10px 16px; background: var(--color-primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.3s ease;"
                                onmouseover="this.style.background='var(--color-primary-light)';"
                                onmouseout="this.style.background='var(--color-primary)';"
                                data-url="${tool.url ? tool.url.replace(/"/g, '&quot;') : ''}">
                            ‚Üí Try Now
                        </button>
                    </div>`
                ).join('');
                
                // Add click handlers for "Try Now" buttons
                document.querySelectorAll('.ai-tool-try-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const url = btn.getAttribute('data-url');
                        if (url) {
                            console.log('üîó Opening AI Tool URL:', url);
                            window.open(url, '_blank');
                        } else {
                            console.warn('‚ö†Ô∏è No URL available for AI Tool');
                            alert('Tool URL not available');
                        }
                    });
                });
            },

            // Load SNS Articles from Official Accounts
            async loadSNSArticles() {
                console.log('üî¥ [SNS] loadSNSArticles START');
                try {
                    let companies = [];
                    let articles = [];
                    
                    console.log('üî¥ [SNS] About to call newsAPI methods...');
                    try {
                        const companyData = await newsAPI.getSNSCompanies();
                        console.log('üü¢ [SNS] getSNSCompanies returned:', companyData);
                        companies = companyData.companies || [];
                        
                        const data = await newsAPI.getSNSArticles(1, 20);
                        console.log('üü¢ [SNS] getSNSArticles returned:', data);
                        articles = data.articles || [];
                    } catch (apiError) {
                        console.warn('‚ö†Ô∏è SNS API Error:', apiError.message);
                        console.log('üî¥ [SNS] Using Mock data...');
                        // Mock companies
                        companies = [
                            { id: 'openai', name: 'OpenAI', icon: 'ü§ñ' },
                            { id: 'google', name: 'Google AI', icon: 'üîç' },
                            { id: 'meta', name: 'Meta AI', icon: 'üî∑' }
                        ];
                        // Mock articles - expanded to 6+
                        articles = [
                            { id: 1, title: 'GPT-5 Released Today', summary: 'OpenAI announces the next generation of AI technology with advanced reasoning capabilities, demonstrating remarkable improvements in complex problem-solving.', source: 'OpenAI', icon: 'ü§ñ', type: 'announcement', timestamp: new Date().toISOString(), url: 'https://openai.com', content: 'OpenAI has unveiled GPT-5, the latest breakthrough in artificial intelligence.' },
                            { id: 2, title: 'Gemini 2.0 Enhanced', summary: 'Google releases improved Gemini model with new features and capabilities including better multimodal understanding and faster inference speeds.', source: 'Google AI', icon: 'üîç', type: 'update', timestamp: new Date(Date.now() - 3600000).toISOString(), url: 'https://google.com', content: 'Google announces significant improvements to its Gemini model.' },
                            { id: 3, title: 'Meta Llama New Version', summary: 'Meta releases latest Llama model version for developers and researchers with improved performance and better efficiency.', source: 'Meta AI', icon: 'üî∑', type: 'release', timestamp: new Date(Date.now() - 7200000).toISOString(), url: 'https://meta.com', content: 'Meta launches a new version of Llama with enhanced capabilities.' },
                            { id: 4, title: 'Microsoft Azure AI Updates', summary: 'Microsoft announces new Azure AI services with enhanced enterprise capabilities and improved security features for large-scale deployments.', source: 'Microsoft AI', icon: 'üîµ', type: 'announcement', timestamp: new Date(Date.now() - 10800000).toISOString(), url: 'https://microsoft.com/ai', content: 'Microsoft introduces comprehensive Azure AI services for enterprises.' },
                            { id: 5, title: 'Anthropic Claude Advanced Features', summary: 'Anthropic introduces new advanced features to Claude AI including improved reasoning, better context understanding, and enhanced safety measures.', source: 'Anthropic', icon: '‚ö°', type: 'update', timestamp: new Date(Date.now() - 14400000).toISOString(), url: 'https://anthropic.com', content: 'Anthropic expands Claude capabilities with new features.' },
                            { id: 6, title: 'IBM Quantum AI Integration', summary: 'IBM announces integration of quantum computing capabilities with AI models, opening new possibilities for solving complex computational problems.', source: 'IBM AI Research', icon: 'üß™', type: 'release', timestamp: new Date(Date.now() - 18000000).toISOString(), url: 'https://ibm.com', content: 'IBM combines quantum computing with artificial intelligence.' }
                        ];
                    }
                    
                    console.log('üî¥ [SNS] Setting snsCompanies and snsArticles...');
                    this.snsCompanies = companies;
                    this.snsArticles = articles;
                    this.snsCurrentPage = 1;
                    this.snsTotalPages = 1;
                    
                    console.log('üî¥ [SNS] About to render SNS components...');
                    this.renderSNSCompanyFilter();
                    console.log('üî¥ [SNS] renderSNSCompanyFilter done');
                    
                    this.renderSNSArticles(this.snsArticles);
                    console.log('üî¥ [SNS] renderSNSArticles done');
                    
                    this.renderSNSPagination();
                    console.log('üî¥ [SNS] renderSNSPagination done');
                    
                    console.log('üì± SNS articles loaded successfully:', this.snsArticles.length);
                } catch (error) {
                    console.error('üî¥ SNS Articles Error:', error);
                    console.error('üî¥ SNS Error Stack:', error.stack);
                    const container = document.getElementById('snsArticlesGrid');
                    if (container) {
                        container.innerHTML = `<div class="empty-state">Error loading SNS articles: ${error.message}</div>`;
                    }
                }
            },

            // Render SNS Company Filter
            renderSNSCompanyFilter() {
                const filterContainer = document.getElementById('snsCompanyFilter');
                if (!filterContainer || !this.snsCompanies) return;

                // Add "All" button
                let filterHTML = `<button class="sns-company-filter" data-company="all" style="padding: 8px 16px; border-radius: 20px; border: 1px solid var(--color-border); background: var(--color-accent); color: var(--color-text); cursor: pointer; transition: all 0.3s ease; font-size: 13px;" 
                        id="snsFilter-all">
                    ‚≠ê All Companies
                </button>`;

                filterHTML += this.snsCompanies.map(company => 
                    `<button class="sns-company-filter" data-company="${company.id}" style="padding: 8px 16px; border-radius: 20px; border: 1px solid var(--color-border); background: var(--color-surface-light); color: var(--color-text); cursor: pointer; transition: all 0.3s ease; font-size: 13px;" 
                            id="snsFilter-${company.id}">
                        ${company.icon} ${company.name}
                    </button>`
                ).join('');

                filterContainer.innerHTML = filterHTML;

                // Add event listeners to company filter buttons
                document.querySelectorAll('.sns-company-filter').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const company = btn.getAttribute('data-company');
                        console.log(`üéØ SNS company filter button clicked: ${company}`);
                        this.filterSNSByCompany(company);
                    });
                });

                console.log(`‚úÖ SNS company filter rendered with ${this.snsCompanies.length} companies`);
            },

            // Filter SNS by company
            async filterSNSByCompany(company) {
                try {
                    console.log(`üì± filterSNSByCompany called with company: ${company}`);
                    
                    if (!company) {
                        console.error('‚ùå Company parameter is empty');
                        return;
                    }
                    
                    let data;
                    if (company === 'all') {
                        console.log('üì° Fetching all SNS articles...');
                        data = await newsAPI.getSNSArticles(1, 20);
                    } else {
                        console.log(`üì° Fetching SNS articles for company: ${company}`);
                        data = await newsAPI.getSNSByCompany(company, 1, 20);
                    }
                    
                    console.log(`‚úÖ Got ${data.articles?.length || 0} articles from API`, data);
                    
                    this.snsArticles = data.articles || [];
                    this.snsCurrentPage = 1;
                    this.snsTotalPages = data.totalPages || 1;

                    // Update button styles
                    const buttons = document.querySelectorAll('.sns-company-filter');
                    buttons.forEach(btn => {
                        const btnCompany = btn.getAttribute('data-company');
                        console.log(`üîç Checking button: ${btnCompany} vs selected: ${company}`);
                        if (btnCompany === company) {
                            btn.style.background = 'var(--color-accent)';
                            btn.style.fontWeight = 'bold';
                            console.log(`‚úÖ Highlighted button for: ${company}`);
                        } else {
                            btn.style.background = 'var(--color-surface-light)';
                            btn.style.fontWeight = 'normal';
                        }
                    });

                    this.renderSNSArticles(this.snsArticles);
                    this.renderSNSPagination();
                    
                    console.log(`‚úÖ SNS filter complete for company: ${company}`);
                } catch (error) {
                    console.error('‚ùå Error filtering SNS:', error);
                    console.error('Error details:', {
                        message: error.message,
                        stack: error.stack
                    });
                    
                    // Show error in UI
                    const container = document.getElementById('snsArticlesGrid');
                    if (container) {
                        container.innerHTML = `<div class="empty-state">‚ùå Error loading articles: ${error.message}</div>`;
                    }
                }
            },

            // Render SNS Articles
            renderSNSArticles(articles) {
                const container = document.getElementById('snsArticlesGrid');
                if (!container) {
                    console.error('‚ùå snsArticlesGrid container not found');
                    return;
                }

                console.log(`üìä renderSNSArticles called with ${articles?.length || 0} articles`);

                if (!articles || articles.length === 0) {
                    container.innerHTML = '<div class="empty-state">No SNS articles available</div>';
                    console.log('‚ö†Ô∏è No articles to display');
                    return;
                }

                // Store articles globally for click handlers to access
                window.snsArticles = articles;
                console.log(`üî¥ [renderSNSArticles] Stored ${articles.length} articles in window.snsArticles`);

                container.innerHTML = articles.map((article, idx) => {
                    return `<div class="sns-article-card" data-article-index="${idx}" style="background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 8px; padding: 16px; cursor: pointer; transition: all 0.3s ease; display: flex; flex-direction: column; gap: 10px;"
                          onmouseover="this.style.background='var(--color-surface)'; this.style.borderColor='var(--color-accent)'; this.style.transform='translateY(-4px)';"
                          onmouseout="this.style.background='var(--color-surface-light)'; this.style.borderColor='var(--color-border)'; this.style.transform='translateY(0)';">
                        
                        <!-- Article Header -->
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 24px;">${article.icon || 'üì±'}</span>
                            <div style="flex: 1;">
                                <div style="font-weight: bold; color: var(--color-text); font-size: 13px; margin-bottom: 4px;">
                                    ${article.source || 'Official'}
                                </div>
                                <div style="display: inline-block; padding: 4px 10px; background: var(--color-primary); border-radius: 12px; font-size: 11px; color: #ffffff;">
                                    ${article.type || 'update'}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Article Title -->
                        <h4 style="font-weight: bold; font-size: 14px; color: var(--color-text); margin: 0; line-height: 1.3;">
                            ${article.title}
                        </h4>
                        
                        <!-- Article Summary -->
                        <p style="font-size: 13px; color: var(--color-text-secondary); margin: 0; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                            ${article.summary || 'No summary available'}
                        </p>
                        
                        <!-- Timestamp -->
                        <div style="font-size: 12px; color: var(--color-text-secondary);">
                            üìÖ ${new Date(article.timestamp).toLocaleDateString()}
                        </div>
                    </div>`;
                }).join('');
                
                // Add click handlers for SNS article cards
                console.log(`üìç Adding event listeners to ${articles.length} SNS article cards`);
                setTimeout(() => {
                    const snsCards = document.querySelectorAll('.sns-article-card');
                    console.log(`üìå Found ${snsCards.length} SNS article cards`);
                    
                    snsCards.forEach((card, idx) => {
                        card.addEventListener('click', function(e) {
                            console.log(`üñ±Ô∏è SNS Card ${idx} clicked`);
                            
                            if (e.target.closest('button')) {
                                console.log('Button clicked, skipping');
                                return;
                            }
                            
                            try {
                                const cardIdx = parseInt(this.getAttribute('data-article-index'));
                                console.log(`ÔøΩ [SNS click] cardIdx=${cardIdx}`);
                                
                                if (!window.snsArticles || !window.snsArticles[cardIdx]) {
                                    console.error(`‚ùå SNS Article not found at index ${cardIdx}`);
                                    return;
                                }
                                
                                const article = window.snsArticles[cardIdx];
                                console.log('‚úÖ SNS Article found:', {
                                    title: article.title,
                                    source: article.source
                                });
                                app.showArticleDetail(article);
                            } catch (err) {
                                console.error('‚ùå Error parsing SNS article data:', err);
                                console.error('‚ùå Stack:', err.stack);
                            }
                        });
                    });
                    
                    console.log(`‚úÖ Click handlers attached to ${snsCards.length} SNS cards`);
                }, 0);
                
                console.log(`‚úÖ SNS articles rendered successfully`);
            },

            // Render SNS Pagination
            renderSNSPagination() {
                const container = document.getElementById('snsPagination');
                if (!container) {
                    console.warn('‚ö†Ô∏è snsPagination container not found');
                    return;
                }

                console.log(`üìÑ renderSNSPagination: current=${this.snsCurrentPage}, total=${this.snsTotalPages}`);

                if (this.snsTotalPages <= 1) {
                    console.log('‚ÑπÔ∏è Only 1 page, no pagination UI needed');
                    container.innerHTML = '';
                    return;
                }

                let paginationHTML = '';
                for (let i = 1; i <= this.snsTotalPages; i++) {
                    const isActive = i === this.snsCurrentPage;
                    paginationHTML += `<button class="sns-pagination-btn" data-page="${i}" style="padding: 8px 12px; margin: 0 4px; background: ${isActive ? 'var(--color-accent)' : 'var(--color-surface-light)'}; color: var(--color-text); border: 1px solid var(--color-border); border-radius: 4px; cursor: pointer; transition: all 0.2s ease;" 
                            >${i}</button>`;
                }
                container.innerHTML = paginationHTML;
                
                // Add event listeners to pagination buttons
                document.querySelectorAll('.sns-pagination-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const page = parseInt(btn.getAttribute('data-page'));
                        console.log(`üìç SNS pagination button clicked: page ${page}`);
                        this.goToSNSPage(page);
                    });
                });
                
                console.log(`‚úÖ SNS pagination rendered with ${this.snsTotalPages} pages`);
            },

            // Go to SNS page
            async goToSNSPage(page) {
                try {
                    console.log(`üìç goToSNSPage called with page: ${page}`);
                    
                    if (!page || page < 1) {
                        console.error('‚ùå Invalid page number:', page);
                        return;
                    }
                    
                    const data = await newsAPI.getSNSArticles(page, 20);
                    console.log(`‚úÖ Got ${data.articles?.length || 0} articles for page ${page}`);
                    
                    this.snsArticles = data.articles || [];
                    this.snsCurrentPage = page;
                    this.snsTotalPages = data.totalPages || 1;
                    
                    this.renderSNSArticles(this.snsArticles);
                    this.renderSNSPagination();
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    
                    console.log(`‚úÖ SNS page load complete: page ${page}/${this.snsTotalPages}`);
                } catch (error) {
                    console.error('‚ùå Error loading SNS page:', error);
                    const container = document.getElementById('snsArticlesGrid');
                    if (container) {
                        container.innerHTML = `<div class="empty-state">‚ùå Error loading page: ${error.message}</div>`;
                    }
                }
            },

            // ===== SNS FEATURED (Home Page) =====
            async loadSNSFeaturedArticles() {
                try {
                    console.log('üì± loadSNSFeaturedArticles started');
                    
                    let companiesData = {};
                    let articlesData = {};
                    
                    // Load companies first
                    try {
                        console.log('üì° Fetching SNS companies...');
                        companiesData = await newsAPI.getSNSCompanies();
                        console.log('‚úÖ Companies loaded:', companiesData.companies?.length || 0);
                    } catch (e) {
                        console.warn('‚ö†Ô∏è Failed to load SNS companies:', e.message);
                        // Use mock companies
                        companiesData = {
                            companies: [
                                { id: 'openai', name: 'OpenAI', icon: 'ü§ñ' },
                                { id: 'google', name: 'Google AI', icon: 'üîç' },
                                { id: 'meta', name: 'Meta AI', icon: 'üî∑' }
                            ]
                        };
                    }
                    this.snsFeaturedCompanies = companiesData.companies || [];
                    
                    // Load SNS articles
                    try {
                        console.log('üì° Fetching SNS articles...');
                        articlesData = await newsAPI.getSNSArticles(1, 6);
                        console.log('‚úÖ Articles loaded:', articlesData.articles?.length || 0, 'totalPages:', articlesData.totalPages);
                    } catch (e) {
                        console.warn('‚ö†Ô∏è Failed to load SNS articles:', e.message);
                        // Use mock articles
                        articlesData = {
                            articles: [
                                { id: 1, title: 'GPT-5 Released Today', summary: 'OpenAI announces the next generation of AI technology with advanced reasoning capabilities, demonstrating remarkable improvements in complex problem-solving.', source: 'OpenAI', icon: 'ü§ñ', type: 'announcement', timestamp: new Date().toISOString(), url: 'https://openai.com' },
                                { id: 2, title: 'Gemini 2.0 Enhanced', summary: 'Google releases improved Gemini model with new features and capabilities including better multimodal understanding and faster inference speeds.', source: 'Google AI', icon: 'üîç', type: 'update', timestamp: new Date().toISOString(), url: 'https://google.com' },
                                { id: 3, title: 'Meta Llama New Version', summary: 'Meta releases latest Llama model version for developers and researchers with improved performance and better efficiency.', source: 'Meta AI', icon: 'üî∑', type: 'release', timestamp: new Date().toISOString(), url: 'https://meta.com' },
                                { id: 4, title: 'Microsoft Azure AI Updates', summary: 'Microsoft announces new Azure AI services with enhanced enterprise capabilities and improved security features for large-scale deployments.', source: 'Microsoft AI', icon: 'üîµ', type: 'announcement', timestamp: new Date(Date.now() - 86400000).toISOString(), url: 'https://microsoft.com/ai' },
                                { id: 5, title: 'Anthropic Claude Advanced Features', summary: 'Anthropic introduces new advanced features to Claude AI including improved reasoning, better context understanding, and enhanced safety measures.', source: 'Anthropic', icon: '‚ö°', type: 'update', timestamp: new Date(Date.now() - 172800000).toISOString(), url: 'https://anthropic.com' },
                                { id: 6, title: 'IBM Quantum AI Integration', summary: 'IBM announces integration of quantum computing capabilities with AI models, opening new possibilities for solving complex computational problems.', source: 'IBM AI Research', icon: 'üß™', type: 'release', timestamp: new Date(Date.now() - 259200000).toISOString(), url: 'https://ibm.com' }
                            ],
                            totalPages: 1
                        };
                    }
                    
                    this.snsFeaturedArticles = articlesData.articles || [];
                    this.snsFeaturedCurrentPage = 1;
                    this.snsFeaturedTotalPages = articlesData.totalPages || 1;
                    
                    console.log('üîÑ Rendering SNS components...');
                    this.renderSNSFeaturedCompanyFilter();
                    this.renderSNSFeaturedArticles(this.snsFeaturedArticles);
                    this.renderSNSFeaturedPagination();
                    
                    console.log('‚úÖ SNS featured articles loaded:', this.snsFeaturedArticles.length);
                } catch (error) {
                    console.error('üî¥ SNS Featured Articles Error:', error);
                    console.error('Error stack:', error.stack);
                    // Show empty state gracefully
                    const container = document.getElementById('snsFeaturedArticlesGrid');
                    if (container) {
                        container.innerHTML = '<div class="empty-state">No SNS articles available at the moment</div>';
                    }
                }
            },

            // Render SNS Featured Company Filter
            renderSNSFeaturedCompanyFilter() {
                const filterContainer = document.getElementById('snsFeaturedCompanyFilter');
                if (!filterContainer) {
                    console.warn('‚ö†Ô∏è SNS Featured Company Filter container not found');
                    return;
                }
                
                if (!this.snsFeaturedCompanies || !Array.isArray(this.snsFeaturedCompanies)) {
                    console.warn('‚ö†Ô∏è SNS Featured Companies data not available');
                    return;
                }

                try {
                    // Add "All" button
                    let filterHTML = `<button style="padding: 8px 16px; border-radius: 20px; border: 1px solid var(--color-border); background: var(--color-accent); color: var(--color-text); cursor: pointer; transition: all 0.3s ease; font-size: 13px;" 
                            onclick="app.filterSNSFeaturedByCompany('all')"
                            id="snsFeaturedFilter-all">
                        ‚≠ê All Companies
                    </button>`;

                    filterHTML += this.snsFeaturedCompanies.map(company => {
                        if (!company) return '';
                        return `<button style="padding: 8px 16px; border-radius: 20px; border: 1px solid var(--color-border); background: var(--color-surface-light); color: var(--color-text); cursor: pointer; transition: all 0.3s ease; font-size: 13px;" 
                                onclick="app.filterSNSFeaturedByCompany('${company.id}')"
                                id="snsFeaturedFilter-${company.id}">
                            ${company.icon || 'üì±'} ${company.name || 'Unknown'}
                        </button>`;
                    }).join('');

                    filterContainer.innerHTML = filterHTML;
                } catch (error) {
                    console.error('Error rendering SNS featured company filter:', error);
                }
            },

            // Filter SNS Featured by company
            async filterSNSFeaturedByCompany(company) {
                try {
                    console.log(`üîÑ Filtering SNS Featured by company: ${company}`);
                    
                    let data = {};
                    if (company === 'all') {
                        console.log('üì° Fetching all SNS articles...');
                        data = await newsAPI.getSNSArticles(1, 6);
                    } else {
                        console.log(`üì° Fetching SNS articles for company: ${company}`);
                        data = await newsAPI.getSNSByCompany(company, 1, 6);
                    }
                    
                    console.log('‚úÖ Received data:', data);
                    
                    this.snsFeaturedArticles = data.articles || [];
                    this.snsFeaturedCurrentPage = 1;
                    this.snsFeaturedTotalPages = data.totalPages || 1;

                    console.log(`‚úÖ Loaded ${this.snsFeaturedArticles.length} articles`);

                    // Update button styles
                    const buttons = document.querySelectorAll('[id^="snsFeaturedFilter-"]');
                    buttons.forEach(btn => {
                        const btnCompany = btn.id.replace('snsFeaturedFilter-', '');
                        if (btnCompany === company) {
                            btn.style.background = 'var(--color-accent)';
                            btn.style.color = '#ffffff';
                        } else {
                            btn.style.background = 'var(--color-surface-light)';
                            btn.style.color = 'var(--color-text)';
                        }
                    });

                    this.renderSNSFeaturedArticles(this.snsFeaturedArticles);
                    this.renderSNSFeaturedPagination();
                } catch (error) {
                    console.error('‚ùå Error filtering SNS Featured:', error);
                    console.error('Error details:', {
                        message: error.message,
                        stack: error.stack
                    });
                    
                    const container = document.getElementById('snsFeaturedArticlesGrid');
                    if (container) {
                        container.innerHTML = `<div class="empty-state">Failed to load articles for ${company}. Error: ${error.message}</div>`;
                    }
                }
            },

            // Format relative time (e.g., "2 hours ago")
            formatRelativeTime(timestamp) {
                try {
                    const date = new Date(timestamp);
                    const now = new Date();
                    const diffMs = now - date;
                    const diffMins = Math.floor(diffMs / 60000);
                    const diffHours = Math.floor(diffMs / 3600000);
                    const diffDays = Math.floor(diffMs / 86400000);

                    if (diffMins < 1) return 'Î∞©Í∏à Ï†Ñ';
                    if (diffMins < 60) return `${diffMins}Î∂Ñ Ï†Ñ`;
                    if (diffHours < 24) return `${diffHours}ÏãúÍ∞Ñ Ï†Ñ`;
                    if (diffDays === 1) return 'Ïñ¥Ï†ú';
                    if (diffDays < 7) return `${diffDays}Ïùº Ï†Ñ`;
                    
                    // For older articles, show full date
                    return date.toLocaleDateString('ko-KR', { 
                        year: 'numeric', 
                        month: '2-digit', 
                        day: '2-digit' 
                    });
                } catch (error) {
                    console.warn('‚ö†Ô∏è Error formatting time:', error);
                    return 'ÏµúÍ∑º';
                }
            },

            // Render SNS Featured Articles
            renderSNSFeaturedArticles(articles) {
                const container = document.getElementById('snsFeaturedArticlesGrid');
                if (!container) {
                    console.warn('‚ö†Ô∏è SNS Featured Articles container not found');
                    return;
                }

                if (!articles || !Array.isArray(articles) || articles.length === 0) {
                    container.innerHTML = '<div class="empty-state">üì± Loading SNS updates...</div>';
                    return;
                }

                try {
                    container.innerHTML = articles.map((article, idx) => {
                        if (!article) return '';
                        
                        const title = article.title || 'Untitled';
                        const summary = article.summary || 'No description available';
                        const source = article.source || 'Official';
                        const icon = article.icon || 'üì±';
                        const type = article.type || 'update';
                        
                        // Use actual article timestamp for display
                        const relativeTime = this.formatRelativeTime(article.timestamp);
                        const fullDate = article.timestamp ? new Date(article.timestamp).toLocaleDateString('ko-KR', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        }) : 'Unknown';
                        
                        return `<div class="sns-featured-card" data-article-index="${idx}" style="background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 8px; padding: 16px; cursor: pointer; transition: all 0.3s ease; display: flex; flex-direction: column; gap: 10px;"
                              onmouseover="this.style.background='var(--color-surface)'; this.style.borderColor='var(--color-accent)'; this.style.transform='translateY(-4px)';"
                              onmouseout="this.style.background='var(--color-surface-light)'; this.style.borderColor='var(--color-border)'; this.style.transform='translateY(0)';"
                              title="${source} - ${fullDate}">
                            
                            <!-- Article Header -->
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 24px;">${icon}</span>
                                <div style="flex: 1;">
                                    <div style="font-weight: bold; color: var(--color-text); font-size: 13px; margin-bottom: 4px;">
                                        ${source}
                                    </div>
                                    <div style="display: inline-block; padding: 4px 10px; background: var(--color-primary); border-radius: 12px; font-size: 11px; color: #ffffff;">
                                        ${type}
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Article Title -->
                            <h4 style="font-weight: bold; font-size: 14px; color: var(--color-text); margin: 0; line-height: 1.3;">
                                ${title}
                            </h4>
                            
                            <!-- Article Summary -->
                            <p style="font-size: 13px; color: var(--color-text-secondary); margin: 0; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                                ${summary}
                            </p>
                            
                            <!-- Timestamp with relative and full date -->
                            <div style="display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: var(--color-text-secondary);">
                                <span>üìÖ ${relativeTime}</span>
                                <span style="opacity: 0.7; font-size: 11px;">${fullDate}</span>
                            </div>
                        </div>`;
                    }).join('');
                    
                    // Store articles globally for click handlers
                    window.snsFeaturedArticles = articles;
                    console.log(`üî¥ [renderSNSFeaturedArticles] Stored ${articles.length} articles in window.snsFeaturedArticles`);
                    
                    // Add click handlers for SNS cards using global articles
                    setTimeout(() => {
                        document.querySelectorAll('.sns-featured-card').forEach((card, idx) => {
                            card.addEventListener('click', () => {
                                console.log(`üñ±Ô∏è SNS Featured Card ${idx} clicked`);
                                if (window.snsFeaturedArticles && window.snsFeaturedArticles[idx]) {
                                    console.log('üì± SNS Article found:', window.snsFeaturedArticles[idx].title);
                                    app.showArticleDetail(window.snsFeaturedArticles[idx]);
                                } else {
                                    console.error(`‚ùå SNS Article not found at index ${idx}`);
                                }
                            });
                        });
                    }, 0);
                } catch (error) {
                    console.error('Error rendering SNS featured articles:', error);
                    container.innerHTML = '<div class="empty-state">Failed to display SNS articles</div>';
                }
            },

            // Render SNS Featured Pagination
            renderSNSFeaturedPagination() {
                const container = document.getElementById('snsFeaturedPagination');
                if (!container) {
                    console.warn('‚ö†Ô∏è SNS Featured Pagination container not found');
                    return;
                }

                if (!this.snsFeaturedTotalPages || this.snsFeaturedTotalPages <= 1) {
                    container.innerHTML = '';
                    return;
                }

                try {
                    let paginationHTML = '';
                    for (let i = 1; i <= this.snsFeaturedTotalPages; i++) {
                        const isActive = i === this.snsFeaturedCurrentPage;
                        paginationHTML += `<button style="padding: 8px 12px; margin: 0 4px; background: ${isActive ? 'var(--color-accent)' : 'var(--color-surface-light)'}; color: var(--color-text); border: 1px solid var(--color-border); border-radius: 4px; cursor: pointer;" 
                                onclick="app.goToSNSFeaturedPage(${i})">${i}</button>`;
                    }
                    container.innerHTML = paginationHTML;
                } catch (error) {
                    console.error('Error rendering SNS featured pagination:', error);
                }
            },

            // Go to SNS Featured page
            async goToSNSFeaturedPage(page) {
                try {
                    const data = await newsAPI.getSNSArticles(page, 6);
                    this.snsFeaturedArticles = data.articles || [];
                    this.snsFeaturedCurrentPage = page;
                    this.renderSNSFeaturedArticles(this.snsFeaturedArticles);
                    this.renderSNSFeaturedPagination();
                } catch (error) {
                    console.error('Error loading SNS Featured page:', error);
                    const container = document.getElementById('snsFeaturedArticlesGrid');
                    if (container) {
                        container.innerHTML = '<div class="empty-state">Failed to load page</div>';
                    }
                }
            },

            // Pagination helper - get container and pagination IDs based on current page
            getPaginationConfig() {
                const config = {
                    'home': { containerId: 'homeNewsList', paginationId: 'homePagination' },
                    'latest': { containerId: 'latestNewsList', paginationId: 'latestPagination' },
                    'saved': { containerId: 'savedNewsList', paginationId: 'savedPagination' },
                    'search': { containerId: 'searchResults', paginationId: 'searchPagination' }
                }[this.currentPageName];
                
                if (!config) {
                    console.warn(`‚ö†Ô∏è Unknown currentPageName: "${this.currentPageName}", defaulting to home`);
                    return { containerId: 'homeNewsList', paginationId: 'homePagination' };
                }
                
                console.log(`üîß getPaginationConfig: name="${this.currentPageName}" ‚Üí container="${config.containerId}", pagination="${config.paginationId}"`);
                return config;
            },

            // Pagination helper - get data array based on current page
            getPaginationDataArray() {
                const arrayMap = {
                    'home': this.allNews,
                    'latest': this.allNews,
                    'saved': this.savedNews,
                    'search': this.allNews  // Search results are stored in allNews
                };
                
                const array = arrayMap[this.currentPageName] || this.allNews;
                const size = array ? array.length : 0;
                
                console.log(`üì¶ getPaginationDataArray: name="${this.currentPageName}" ‚Üí array.length=${size}`);
                return array;
            },

            // Go to specific page
            goToPage(page) {
                console.log(`ÔøΩ goToPage(${page}) called`);
                this.currentPage = page;
                const config = this.getPaginationConfig();
                const data = this.getPaginationDataArray();
                const totalPages = Math.ceil(data.length / this.itemsPerPage);
                console.log(`‚úÖ Rendering page ${page}/${totalPages} with ${data.length} items`);
                this.renderNews(data, config.containerId, config.paginationId);
            },

            // Next page
            nextPage() {
                console.log(`‚è≠Ô∏è nextPage() called from page ${this.currentPage}`);
                const data = this.getPaginationDataArray();
                const totalPages = Math.ceil(data.length / this.itemsPerPage);
                if (this.currentPage < totalPages) {
                    this.currentPage++;
                    console.log(`‚úÖ Moving to page ${this.currentPage}/${totalPages}`);
                    const config = this.getPaginationConfig();
                    this.renderNews(data, config.containerId, config.paginationId);
                } else {
                    console.warn(`‚ö†Ô∏è Already on last page (${this.currentPage}/${totalPages})`);
                }
            },

            // Previous page
            prevPage() {
                console.log(`‚èÆÔ∏è prevPage() called from page ${this.currentPage}`);
                if (this.currentPage > 1) {
                    this.currentPage--;
                    const data = this.getPaginationDataArray();
                    const totalPages = Math.ceil(data.length / this.itemsPerPage);
                    console.log(`‚úÖ Moving to page ${this.currentPage}/${totalPages}`);
                    const config = this.getPaginationConfig();
                    this.renderNews(data, config.containerId, config.paginationId);
                } else {
                    console.warn(`‚ö†Ô∏è Already on first page (${this.currentPage})`);
                }
            },

            // Search
            async search() {
                const keywordInput = document.getElementById('searchInput');
                const keyword = keywordInput?.value?.trim();
                
                if (!keyword) {
                    console.warn('‚ö†Ô∏è Search keyword is empty');
                    alert('Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                    return;
                }

                try {
                    console.log(`üîç Searching for: "${keyword}"`);
                    
                    // First, navigate to search page
                    console.log('üìç Navigating to search page...');
                    this.navigate('search');
                    
                    // Show loading state
                    const resultsContainer = document.getElementById('searchResults');
                    if (resultsContainer) {
                        resultsContainer.innerHTML = '<div class="empty-state">‚è≥ Í≤ÄÏÉâ Ï§ë...</div>';
                    }
                    
                    // Then load search results
                    let data = null;
                    try {
                        console.log(`üåê Calling API with keyword: "${keyword}"`);
                        data = await newsAPI.searchNews(keyword, 1, 20);
                        console.log(`‚úÖ Search results received: ${data.news?.length || 0} articles`);
                    } catch (apiError) {
                        console.warn('‚ö†Ô∏è Search API Error, using Mock data:', apiError.message);
                        // Use mock data if API fails
                        data = {
                            news: [
                                { id: 1, title: `${keyword} Innovation Breakthrough`, summary: `New developments in ${keyword} are revolutionizing the industry.`, source: 'TechNews', url: 'https://example.com/1', timestamp: new Date().toISOString(), content: `Recent advances in ${keyword} show promising results.` },
                                { id: 2, title: `${keyword} Model Achieves Record Performance`, summary: `${keyword} models now reach unprecedented accuracy levels.`, source: 'AI Weekly', url: 'https://example.com/2', timestamp: new Date().toISOString(), content: `Latest ${keyword} implementations achieve record-breaking performance.` },
                                { id: 3, title: `${keyword} Applications Expand to Enterprise`, summary: `${keyword} is now being widely adopted in enterprise environments.`, source: 'TechCrunch', url: 'https://example.com/3', timestamp: new Date().toISOString(), content: `${keyword} adoption in enterprise systems is accelerating rapidly.` },
                                { id: 4, title: `${keyword} Market Growth Exceeds Expectations`, summary: `The ${keyword} market is growing faster than previously projected.`, source: 'MarketNews', url: 'https://example.com/4', timestamp: new Date().toISOString(), content: `${keyword} sector shows strong market growth and investment.` },
                                { id: 5, title: `${keyword} Research Yields New Insights`, summary: `Researchers discover novel approaches to ${keyword} challenges.`, source: 'ResearchDaily', url: 'https://example.com/5', timestamp: new Date().toISOString(), content: `New research in ${keyword} opens up fresh possibilities.` },
                                { id: 6, title: `${keyword} Ethics and Safety Become Priority`, summary: `Focus shifts to responsible ${keyword} development practices.`, source: 'TechethicsNews', url: 'https://example.com/6', timestamp: new Date().toISOString(), content: `${keyword} safety and ethics are increasingly important considerations.` }
                            ],
                            totalPages: 1
                        };
                    }
                    
                    if (!data || !data.news) {
                        console.error('‚ùå Invalid API response:', data);
                        throw new Error('Invalid search response from API');
                    }
                    
                    this.allNews = data.news || [];
                    this.currentPage = 1;
                    this.searchQuery = keyword;
                    
                    // Render results
                    console.log(`üìä Rendering ${this.allNews.length} articles...`);
                    this.renderNews(this.allNews, 'searchResults', 'searchPagination');
                    
                    console.log('‚úÖ Search results rendered successfully');
                    
                    // Scroll to results
                    setTimeout(() => {
                        const resultsElement = document.getElementById('searchResults');
                        if (resultsElement) {
                            resultsElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }, 100);
                    
                } catch (error) {
                    console.error('‚ùå Search error:', error);
                    const container = document.getElementById('searchResults');
                    if (container) {
                        container.innerHTML = `<div class="empty-state">‚ùå Í≤ÄÏÉâ Ïò§Î•ò: ${error.message}</div>`;
                    }
                }
            },

            // Update search suggestions (autocomplete)
            updateSearchSuggestions() {
                const input = document.getElementById('searchInput');
                const suggestionsDiv = document.getElementById('searchSuggestions');
                const value = input.value.trim().toLowerCase();

                if (!value) {
                    suggestionsDiv.style.display = 'none';
                    return;
                }

                // Get all unique keywords from HOT TAGS
                const hotTagsKeywords = ['AI', 'Machine Learning', 'Cloud', 'Data', 'Security', 'API', 
                                        'DevOps', 'Python', 'JavaScript', 'LLM', 'GPT', 'Neural', 
                                        'Algorithm', 'Deep Learning', 'Tech', 'Innovation', 'Software', 
                                        'Web', 'Mobile', 'Enterprise', 'Network', 'Database', 
                                        'Framework', 'Platform', 'Service', 'Artificial Intelligence',
                                        'Neural Network', 'Big Data', 'Cybersecurity', 'Cloud Computing',
                                        'IoT', 'Blockchain', 'Quantum', 'Robotics', 'Automation',
                                        'DeepMind', 'OpenAI', 'Anthropic', 'Google', 'Meta', 'Microsoft'];

                // Filter matching suggestions
                const matches = hotTagsKeywords
                    .filter(tag => tag.toLowerCase().includes(value))
                    .slice(0, 8); // Limit to 8 suggestions

                console.log(`üîç Search suggestions found: ${matches.length} matches for "${value}"`);

                if (matches.length === 0) {
                    suggestionsDiv.style.display = 'none';
                    return;
                }

                // Display suggestions
                suggestionsDiv.innerHTML = matches.map(tag => 
                    `<div style="padding: 10px 12px; cursor: pointer; border-bottom: 1px solid var(--color-border); 
                                 background: transparent; transition: background 0.2s;"
                         onmouseover="this.style.background='var(--color-surface-light)'"
                         onmouseout="this.style.background='transparent'"
                         onclick="document.getElementById('searchInput').value='${tag}'; app.search(); document.getElementById('searchSuggestions').style.display='none';">
                        üîç ${tag}
                    </div>`
                ).join('');
                suggestionsDiv.style.display = 'block';
                console.log(`‚úÖ Search suggestions displayed`);
            },

            // Load search page with HOT TAGS
            async loadSearchPage() {
                this.showSearchHotTags();
            },

            showSearchHotTags() {
                const hotTagsKeywords = ['AI', 'Machine Learning', 'Cloud', 'Data', 'Security', 'API', 
                                        'DevOps', 'Python', 'JavaScript', 'LLM', 'GPT', 'Neural', 
                                        'Algorithm', 'Deep Learning', 'Tech', 'Innovation', 'Software', 
                                        'Web', 'Mobile', 'Enterprise', 'Network', 'Database', 
                                        'Framework', 'Platform', 'Service'];

                const searchHotTagsDiv = document.getElementById('searchHotTags');
                if (searchHotTagsDiv) {
                    searchHotTagsDiv.innerHTML = hotTagsKeywords.map(tag => 
                        `<span class="news-source" style="padding: 8px 16px; cursor: pointer; transition: all 0.3s ease; 
                                                          background: var(--color-surface-light); border: 1px solid var(--color-border);"
                               onmouseover="this.style.background='var(--color-accent)'; this.style.color='white';"
                               onmouseout="this.style.background='var(--color-surface-light)'; this.style.color='var(--color-text)';"
                               onclick="document.getElementById('searchInput').value='${tag}'; app.search();"
                               title="Search for ${tag}">
                            #${tag}
                        </span>`
                    ).join('');
                }
            },

            // Bookmarks
            async toggleBookmark(newsId) {
                if (!this.currentUser) {
                    alert('Please log in to save articles');
                    return;
                }
                // API call would go here
            },

            // Auth
            openLogin() {
                console.log('üîì Opening login modal');
                document.getElementById('loginModal').classList.add('open');
                
                // Initialize Google Sign-In when modal opens
                setTimeout(() => {
                    console.log('üîê Initializing Google Sign-In for login...');
                    if (window.google?.accounts?.id) {
                        try {
                            const clientId = '819402691086-v0rb8jqe8p1ibt9pqhb0s7chfr8snnib.apps.googleusercontent.com';
                            
                            window.google.accounts.id.initialize({
                                client_id: clientId,
                                callback: (response) => {
                                    console.log('üìã Google callback in login modal');
                                    app.handleGoogleLoginResponse(response);
                                },
                                error_callback: (error) => {
                                    console.error('‚ùå Google error:', error);
                                }
                            });
                            
                            console.log('‚úÖ Google initialized for login modal');
                        } catch (error) {
                            console.error('‚ùå Error initializing Google in login modal:', error);
                        }
                    } else {
                        console.warn('‚ö†Ô∏è Google accounts ID not available yet');
                    }
                }, 100);
            },

            closeLogin() {
                console.log('üîê Closing login modal');
                document.getElementById('loginModal').classList.remove('open');
            },

            closeShareModal() {
                const shareModal = document.getElementById('shareModal');
                const shareModalOverlay = document.getElementById('shareModalOverlay');
                if (shareModal) shareModal.style.display = 'none';
                if (shareModalOverlay) shareModalOverlay.style.display = 'none';
                console.log('üì§ Share modal closed');
            },

            recordShare(articleTitle, platform) {
                try {
                    const shares = JSON.parse(localStorage.getItem('articleShares') || '{}');
                    if (!shares[articleTitle]) {
                        shares[articleTitle] = {};
                    }
                    if (!shares[articleTitle][platform]) {
                        shares[articleTitle][platform] = 0;
                    }
                    shares[articleTitle][platform]++;
                    localStorage.setItem('articleShares', JSON.stringify(shares));
                    console.log(`üìä Share recorded: ${articleTitle} on ${platform}`);
                } catch (error) {
                    console.error('‚ùå Error recording share:', error);
                }
            },

            // Ìïú Î™ÖÏùò ÏÇ¨Ïö©ÏûêÍ∞Ä Ìïú Í∞úÏãúÎ¨ºÏóê ÎåÄÌï¥ Ìïú Î∞òÏùëÎßå Ìï† Ïàò ÏûàÎèÑÎ°ù Í¥ÄÎ¶¨
            toggleReaction(reaction) {
                try {
                    const article = this.currentArticle;
                    if (!article) {
                        console.error('‚ùå No article selected');
                        return;
                    }
                    
                    const articleId = article.url || article.title; // URLÏùÑ IDÎ°ú ÏÇ¨Ïö©
                    const userReactions = JSON.parse(localStorage.getItem('userReactions') || '{}');
                    
                    // ÏÇ¨Ïö©ÏûêÍ∞Ä Ïù¥ÎØ∏ Ïù¥ Í∏∞ÏÇ¨Ïóê Î∞òÏùëÌñàÎäîÏßÄ ÌôïÏù∏
                    const currentReaction = userReactions[articleId];
                    
                    if (currentReaction === reaction) {
                        // Í∞ôÏùÄ Î∞òÏùëÏùÑ Îã§Ïãú ÌÅ¥Î¶≠ÌïòÎ©¥ Î∞òÏùë Ï∑®ÏÜå
                        delete userReactions[articleId];
                        console.log(`‚ùå Reaction removed: ${reaction}`);
                    } else {
                        // ÏÉàÎ°úÏö¥ Î∞òÏùë Ï∂îÍ∞Ä (Ïù¥Ï†Ñ Î∞òÏùë ÎçÆÏñ¥Ïì∞Í∏∞)
                        userReactions[articleId] = reaction;
                        console.log(`‚úÖ Reaction changed to: ${reaction}`);
                    }
                    
                    localStorage.setItem('userReactions', JSON.stringify(userReactions));
                    
                    // Î∞òÏùë ÌöüÏàò ÏóÖÎç∞Ïù¥Ìä∏
                    this.updateReactionCounts(articleId, article.title);
                } catch (error) {
                    console.error('‚ùå Error toggling reaction:', error);
                }
            },

            // Î∞òÏùë ÌöüÏàò Í∏∞Î°ù Î∞è UI ÏóÖÎç∞Ïù¥Ìä∏
            updateReactionCounts(articleId, articleTitle) {
                try {
                    const reactionCounts = JSON.parse(localStorage.getItem('reactionCounts') || '{}');
                    const userReactions = JSON.parse(localStorage.getItem('userReactions') || '{}');
                    const previousReactionsStorage = JSON.parse(localStorage.getItem('previousReactions') || '{}');
                    
                    // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Î∞òÏùë
                    const currentReaction = userReactions[articleId];
                    
                    // Ïù¥Ï†Ñ ÏÇ¨Ïö©Ïûê Î∞òÏùë (Ïù¥Ï†ÑÏóê ÎàåÎ†ÄÎçò Î∞òÏùë)
                    const previousReaction = previousReactionsStorage[articleId];
                    
                    // Î™®Îì† Î∞òÏùë Ïàò Í≥ÑÏÇ∞
                    const allReactions = {};
                    const reactions = ['üëç', 'üî•', 'üòä', 'üòï'];
                    
                    reactions.forEach(reaction => {
                        const key = `${articleId}_${reaction}`;
                        allReactions[reaction] = reactionCounts[key] || 0;
                    });
                    
                    // Ïù¥Ï†Ñ Î∞òÏùëÏù¥ ÏûàÏúºÎ©¥ Í∞úÏàò Í∞êÏÜå
                    if (previousReaction && previousReaction !== currentReaction) {
                        const previousKey = `${articleId}_${previousReaction}`;
                        if (allReactions[previousReaction] > 0) {
                            allReactions[previousReaction]--;
                        }
                    }
                    
                    // ÌòÑÏû¨ Î∞òÏùëÏù¥ ÏûàÏúºÎ©¥ Í∞úÏàò Ï¶ùÍ∞Ä
                    if (currentReaction) {
                        const currentKey = `${articleId}_${currentReaction}`;
                        allReactions[currentReaction]++;
                    }
                    
                    // localStorageÏóê Î∞òÏùë ÌöüÏàò Ï†ÄÏû•
                    reactions.forEach(reaction => {
                        const key = `${articleId}_${reaction}`;
                        reactionCounts[key] = allReactions[reaction];
                    });
                    localStorage.setItem('reactionCounts', JSON.stringify(reactionCounts));
                    
                    // ÌòÑÏû¨ Î∞òÏùëÏùÑ Ïù¥Ï†Ñ Î∞òÏùëÏúºÎ°ú Ï†ÄÏû•
                    if (currentReaction) {
                        previousReactionsStorage[articleId] = currentReaction;
                    } else {
                        delete previousReactionsStorage[articleId];
                    }
                    localStorage.setItem('previousReactions', JSON.stringify(previousReactionsStorage));
                    
                    // UI ÏóÖÎç∞Ïù¥Ìä∏
                    this.updateReactionUI(articleId, currentReaction, allReactions);
                } catch (error) {
                    console.error('‚ùå Error updating reaction counts:', error);
                }
            },

            // UI ÏóÖÎç∞Ïù¥Ìä∏ - Í∞Å Î∞òÏùë Î≤ÑÌäºÏóê ÌöüÏàò ÌëúÏãú
            updateReactionUI(articleId, userReaction, allReactions) {
                try {
                    const reactionWrappers = document.querySelectorAll('.reaction-wrapper');
                    reactionWrappers.forEach(wrapper => {
                        const reaction = wrapper.getAttribute('data-reaction');
                        const countEl = wrapper.querySelector('.reaction-count');
                        
                        if (countEl) {
                            countEl.textContent = allReactions[reaction] || 0;
                        }
                        
                        // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Î∞òÏùëÏóê ÌïòÏù¥ÎùºÏù¥Ìä∏
                        if (userReaction === reaction) {
                            wrapper.style.background = 'var(--color-primary)';
                            wrapper.style.borderColor = 'var(--color-primary-light)';
                            if (countEl) countEl.style.color = '#ffffff';
                        } else {
                            wrapper.style.background = 'var(--color-surface-light)';
                            wrapper.style.borderColor = 'var(--color-border)';
                            if (countEl) countEl.style.color = 'var(--color-text-secondary)';
                        }
                    });
                } catch (error) {
                    console.error('‚ùå Error updating reaction UI:', error);
                }
            },

            recordReaction(articleTitle, reaction) {
                // Î†àÍ±∞Ïãú Ìï®Ïàò - toggleReactionÏúºÎ°ú ÌÜµÌï©Îê®
                this.toggleReaction(reaction);
            },

            getShareCounts(articleTitle) {
                try {
                    const shares = JSON.parse(localStorage.getItem('articleShares') || '{}');
                    return shares[articleTitle] || {};
                } catch (error) {
                    console.error('‚ùå Error getting share counts:', error);
                    return {};
                }
            },

            getReactionCounts(articleTitle) {
                try {
                    const reactions = JSON.parse(localStorage.getItem('articleReactions') || '{}');
                    return reactions[articleTitle] || {};
                } catch (error) {
                    console.error('‚ùå Error getting reaction counts:', error);
                    return {};
                }
            },

            openSignup() {
                console.log('üìù Opening signup modal');
                document.getElementById('signupModal').classList.add('open');
                
                // Initialize Google Sign-In when modal opens
                setTimeout(() => {
                    console.log('üîê Initializing Google Sign-In for signup...');
                    if (window.google?.accounts?.id) {
                        try {
                            const clientId = '819402691086-v0rb8jqe8p1ibt9pqhb0s7chfr8snnib.apps.googleusercontent.com';
                            
                            window.google.accounts.id.initialize({
                                client_id: clientId,
                                callback: (response) => {
                                    console.log('üìã Google callback in signup modal');
                                    app.handleGoogleLoginResponse(response);
                                },
                                error_callback: (error) => {
                                    console.error('‚ùå Google error:', error);
                                }
                            });
                            
                            console.log('‚úÖ Google initialized for signup modal');
                        } catch (error) {
                            console.error('‚ùå Error initializing Google in signup modal:', error);
                        }
                    } else {
                        console.warn('‚ö†Ô∏è Google accounts ID not available yet');
                    }
                }, 100);
            },

            closeSignup() {
                console.log('üìù Closing signup modal');
                document.getElementById('signupModal').classList.remove('open');
            },

            async performLogin() {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                try {
                    const data = await newsAPI.login(email, password);
                    this.currentUser = data.user;
                    this.updateProfileUI();
                    this.closeLogin();
                } catch (error) {
                    alert('Login failed: ' + error.message);
                }
            },

            validateSignupForm() {
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                const emailError = document.getElementById('signupEmailError');
                const passwordError = document.getElementById('signupPasswordError');
                
                let isEmailValid = true;
                let isPasswordValid = true;
                
                // Email validation - check valid email format
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (email && !emailRegex.test(email)) {
                    emailError.textContent = 'Please check your email address.';
                    emailError.style.display = 'block';
                    isEmailValid = false;
                } else if (!email) {
                    emailError.textContent = '';
                    emailError.style.display = 'none';
                } else {
                    emailError.textContent = '';
                    emailError.style.display = 'none';
                }
                
                // Password validation
                // Requirements: 8+ chars, uppercase, lowercase, number, special char
                const passwordRequirements = {
                    minLength: password.length >= 8,
                    hasUppercase: /[A-Z]/.test(password),
                    hasLowercase: /[a-z]/.test(password),
                    hasNumber: /\d/.test(password),
                    hasSpecialChar: /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)
                };
                
                const allPasswordRequirementsMet = Object.values(passwordRequirements).every(req => req);
                
                if (password && !allPasswordRequirementsMet) {
                    passwordError.textContent = 'Please check password requirements.';
                    passwordError.style.display = 'block';
                    isPasswordValid = false;
                } else if (!password) {
                    passwordError.textContent = '';
                    passwordError.style.display = 'none';
                } else {
                    passwordError.textContent = '';
                    passwordError.style.display = 'none';
                }
                
                return isEmailValid && isPasswordValid;
            },

            async performSignup() {
                const email = document.getElementById('signupEmail').value;
                const name = document.getElementById('signupName').value;
                const password = document.getElementById('signupPassword').value;
                
                // Validate form before attempting signup
                if (!this.validateSignupForm()) {
                    return;
                }
                
                try {
                    const data = await newsAPI.register(email, password, ['AI', 'Technology']);
                    this.currentUser = data.user;
                    this.updateProfileUI();
                    this.closeSignup();
                } catch (error) {
                    alert('Signup failed: ' + error.message);
                }
            },

            /**
             * Google OAuth Login
             * Uses Google Identity Services library
             */
            async loginWithGoogle() {
                try {
                    console.log('üîê Initiating Google OAuth login...');
                    
                    // Check if Google Identity Services is loaded
                    if (!window.google?.accounts?.id) {
                        console.error('‚ùå Google Identity Services not loaded. Waiting...');
                        // Wait for library to be available
                        for (let i = 0; i < 50; i++) {
                            await new Promise(resolve => setTimeout(resolve, 100));
                            if (window.google?.accounts?.id) break;
                        }
                    }
                    
                    if (!window.google?.accounts?.id) {
                        throw new Error('Google Identity Services failed to load');
                    }
                    
                    console.log('‚úÖ Google Identity Services loaded');
                    
                    // Initialize Google Identity Services
                    const clientId = '819402691086-v0rb8jqe8p1ibt9pqhb0s7chfr8snnib.apps.googleusercontent.com';
                    
                    window.google.accounts.id.initialize({
                        client_id: clientId,
                        callback: (response) => {
                            console.log('üìã Google callback received');
                            app.handleGoogleLoginResponse(response);
                        },
                        error_callback: (error) => {
                            console.error('‚ùå Google OAuth Error:', error);
                            alert('Google authentication failed: ' + error);
                        }
                    });
                    
                    console.log('‚úÖ Google OAuth initialized with client_id:', clientId);
                    
                    // Display One Tap UI
                    console.log('üì± Displaying Google One Tap UI...');
                    window.google.accounts.id.prompt((notification) => {
                        console.log('üì± Google prompt notification:', notification);
                        
                        if (notification.isNotDisplayed()) {
                            console.log('‚ö†Ô∏è One Tap UI not displayed, showing manual button...');
                            app.showGoogleSignInButton();
                        }
                    });
                    
                } catch (error) {
                    console.error('‚ùå Google OAuth Login Error:', error);
                    console.error('Stack:', error.stack);
                    alert('Google login setup failed: ' + error.message);
                }
            },

            /**
             * Show manual Google Sign-In button if One Tap UI unavailable
             */
            showGoogleSignInButton() {
                try {
                    console.log('üîò Creating manual Google Sign-In button...');
                    
                    // Create a container for the button
                    const buttonContainer = document.getElementById('googleSignInButton');
                    if (!buttonContainer) {
                        console.warn('‚ö†Ô∏è googleSignInButton container not found');
                        return;
                    }
                    
                    const clientId = '819402691086-v0rb8jqe8p1ibt9pqhb0s7chfr8snnib.apps.googleusercontent.com';
                    
                    if (window.google?.accounts?.id) {
                        window.google.accounts.id.renderButton(
                            buttonContainer,
                            {
                                theme: 'outline',
                                size: 'large',
                                text: 'signin_with'
                            }
                        );
                        console.log('‚úÖ Google Sign-In button rendered');
                    }
                } catch (error) {
                    console.error('‚ùå Error rendering Google button:', error);
                }
            },

            /**
             * Google OAuth Signup
             */
            async signupWithGoogle() {
                try {
                    console.log('üîê Initiating Google OAuth signup...');
                    
                    // Same process as login for signup flow
                    await this.loginWithGoogle();
                } catch (error) {
                    console.error('‚ùå Google OAuth Signup Error:', error);
                    console.error('Stack:', error.stack);
                    alert('Google signup failed: ' + error.message);
                }
            },

            /**
             * Handle Google OAuth Response (Official Google Sign-In Response)
             */
            async handleGoogleLoginResponse(response) {
                try {
                    console.log('üìã Processing Google OAuth response...');
                    console.log('Response:', response);
                    
                    // Check for credential (from One Tap or Sign-In button)
                    const credential = response.credential;
                    
                    if (!credential) {
                        console.error('‚ùå No credential in response:', response);
                        throw new Error('No credential received from Google. Response: ' + JSON.stringify(response));
                    }
                    
                    console.log('‚úÖ Credential received from Google');
                    
                    // Decode JWT token (Google provides this)
                    // JWT format: header.payload.signature
                    const parts = credential.split('.');
                    if (parts.length !== 3) {
                        throw new Error('Invalid JWT token format');
                    }
                    
                    const base64Url = parts[1];
                    const base64 = base64Url
                        .replace(/-/g, '+')
                        .replace(/_/g, '/');
                    
                    // Add padding if necessary
                    const padded = base64 + '==='.slice(0, (3 - base64.length % 3) % 3);
                    
                    let jsonPayload;
                    try {
                        const decodedStr = atob(padded);
                        jsonPayload = JSON.parse(decodedStr);
                    } catch (decodeError) {
                        console.error('‚ùå Failed to decode JWT:', decodeError);
                        console.error('Base64 string:', base64Url);
                        throw new Error('Failed to decode Google JWT token');
                    }
                    
                    console.log('‚úÖ Google Profile decoded:', {
                        email: jsonPayload.email,
                        name: jsonPayload.name,
                        picture: jsonPayload.picture,
                        email_verified: jsonPayload.email_verified
                    });
                    
                    // Verify email
                    if (!jsonPayload.email || !jsonPayload.email_verified) {
                        throw new Error('Email not verified by Google');
                    }
                    
                    // Send to backend for verification and user creation/login
                    console.log('üì° Sending credentials to backend...');
                    
                    try {
                        const backendResponse = await newsAPI.request('/user/google-auth', {
                            method: 'POST',
                            body: JSON.stringify({
                                idToken: credential,
                                email: jsonPayload.email,
                                name: jsonPayload.name,
                                picture: jsonPayload.picture
                            }),
                            skipAuth: true
                        });
                        
                        console.log('‚úÖ Backend response:', backendResponse);
                        
                        if (backendResponse.token) {
                            console.log('üîë Token received from backend');
                            newsAPI.setToken(backendResponse.token);
                            this.currentUser = backendResponse.user;
                            
                            console.log('üë§ User:', this.currentUser);
                            this.updateProfileUI();
                            this.closeLogin();
                            this.closeSignup();
                            
                            console.log('‚úÖ Google OAuth login successful');
                            alert('Welcome ' + (this.currentUser.name || this.currentUser.email) + '! üéâ');
                        } else {
                            throw new Error('No token in backend response');
                        }
                    } catch (backendError) {
                        console.error('‚ö†Ô∏è Backend error, falling back to local session:', backendError);
                        
                        // Fallback: Create local session
                        this.currentUser = {
                            id: jsonPayload.sub,
                            email: jsonPayload.email,
                            name: jsonPayload.name,
                            picture: jsonPayload.picture,
                            provider: 'google'
                        };
                        localStorage.setItem('googleUser', JSON.stringify(this.currentUser));
                        localStorage.setItem('auth_token', 'google_' + jsonPayload.sub);
                        
                        console.log('‚úÖ Local session created:', this.currentUser);
                        this.updateProfileUI();
                        this.closeLogin();
                        this.closeSignup();
                        
                        alert('Welcome ' + (this.currentUser.name || this.currentUser.email) + '! üéâ');
                    }
                } catch (error) {
                    console.error('‚ùå Google OAuth Response Error:', error);
                    console.error('Error stack:', error.stack);
                    alert('Failed to process Google login: ' + error.message);
                }
            },

            logout() {
                newsAPI.logout();
                this.currentUser = null;
                this.updateProfileUI();
                this.closeDrawer();
            },

            async loadUserProfile() {
                try {
                    const token = localStorage.getItem('authToken');
                    if (token) {
                        const data = await newsAPI.request('/user/profile', { method: 'GET' });
                        this.currentUser = data.user;
                    }
                } catch (error) {
                    console.log('Not logged in:', error);
                }
                this.updateProfileUI();
            },

            updateProfileUI() {
                try {
                    const profileInfo = document.getElementById('profileInfo');
                    const profileButtons = document.getElementById('profileButtons');
                    const logoutBtn = document.getElementById('logoutBtn');

                    if (this.currentUser) {
                        if (profileInfo) profileInfo.classList.add('show');
                        const nameEl = document.getElementById('profileName');
                        const emailEl = document.getElementById('profileEmail');
                        if (nameEl) nameEl.textContent = this.currentUser.nickname || this.currentUser.email;
                        if (emailEl) emailEl.textContent = this.currentUser.email;
                        if (profileButtons) profileButtons.classList.add('logged-in');
                        if (logoutBtn) logoutBtn.classList.add('show');
                    } else {
                        if (profileInfo) profileInfo.classList.remove('show');
                        if (profileButtons) profileButtons.classList.remove('logged-in');
                        if (logoutBtn) logoutBtn.classList.remove('show');
                    }
                } catch (error) {
                    console.log('updateProfileUI error:', error);
                }
            },

            // Settings
            changeLanguage(lang) {
                console.log(`üåê Changing language to: ${lang}`);
                this.currentLang = lang;
                localStorage.setItem('language', lang);
                
                // Update all UI elements immediately
                this.updateUILanguage();
                
                // Show notification
                const langNames = { en: 'English', ko: 'ÌïúÍµ≠Ïñ¥', ja: 'Êó•Êú¨Ë™û', zh: '‰∏≠Êñá' };
                console.log(`‚úÖ Language changed to ${langNames[lang] || lang}`);
            },
            
            // Helper function to translate text
            t(key) {
                return (i18n[this.currentLang] && i18n[this.currentLang][key]) || 
                       (i18n['en'] && i18n['en'][key]) || 
                       key;
            },
            
            // Update all UI text to current language
            updateUILanguage() {
                // Update menu items
                const menuItems = {
                    home: '.menu-item[data-route="home"]',
                    latest: '.menu-item[data-route="latest"]',
                    trends: '.menu-item[data-route="trends"]',
                    sns: '.menu-item[data-route="sns"]',
                    search: '.menu-item[data-route="search"]',
                    saved: '.menu-item[data-route="saved"]',
                    settings: '.menu-item[data-route="settings"]',
                    help: '.menu-item[data-route="help"]'
                };
                
                Object.entries(menuItems).forEach(([key, selector]) => {
                    const el = document.querySelector(selector);
                    if (el) {
                        const span = el.querySelector('span:not(.material-symbols-outlined)');
                        if (span) span.textContent = this.t(key);
                    }
                });
                
                // Update page titles (h2 elements)
                const pageTitles = {
                    latestPage: 'latestNews',
                    trendsPage: 'trends',
                    snsPage: 'snsUpdates',
                    searchPage: 'search',
                    savedPage: 'savedForLater',
                    settingsPage: 'settings',
                    helpPage: 'help'
                };
                
                Object.entries(pageTitles).forEach(([pageId, translationKey]) => {
                    const page = document.getElementById(pageId);
                    if (page) {
                        const title = page.querySelector('h2');
                        if (title) {
                            // Preserve emoji and update text after it
                            const emoji = title.textContent.match(/[üî•üéØüì∞üìäüíæ‚öôÔ∏è‚ùì]/)?.[0] || '';
                            title.textContent = `${emoji} ${this.t(translationKey)}`.trim();
                        }
                    }
                });
                
                // Update Home page section titles (h3 elements)
                const homePage = document.getElementById('homePage');
                if (homePage) {
                    const h3Elements = homePage.querySelectorAll('h3');
                    h3Elements.forEach(h3 => {
                        const text = h3.textContent;
                        if (text.includes('Featured News')) {
                            h3.textContent = this.t('featuredNews');
                        } else if (text.includes('SNS Official') || text.includes('üì±')) {
                            h3.textContent = 'üì± ' + this.t('snsUpdates');
                        } else if (text.includes('HOT TAGS')) {
                            h3.textContent = this.t('hotTags');
                        } else if (text.includes('AI Tools')) {
                            h3.textContent = 'ü§ñ ' + this.t('recommendedAITools');
                        }
                    });
                }
                
                // Update Settings page specific labels
                const settingsPage = document.getElementById('settingsPage');
                if (settingsPage) {
                    const h3Elements = settingsPage.querySelectorAll('h3');
                    h3Elements.forEach(h3 => {
                        if (h3.textContent.includes('Language')) {
                            h3.textContent = this.t('language');
                        } else if (h3.textContent.includes('Priority')) {
                            h3.textContent = this.t('priorityTopics');
                        } else if (h3.textContent.includes('Notification')) {
                            h3.textContent = this.t('notifications');
                        } else if (h3.textContent.includes('Theme')) {
                            h3.textContent = this.t('theme');
                        }
                    });
                    
                    // Auto-translate label
                    const autoTranslateLabel = Array.from(settingsPage.querySelectorAll('.settings-label'))
                        .find(el => el.textContent.includes('Auto-translate') || el.textContent.includes('ÏûêÎèô Î≤àÏó≠'));
                    if (autoTranslateLabel) autoTranslateLabel.textContent = this.t('autoTranslate');
                    
                    // Enable notifications label
                    const notifLabel = Array.from(settingsPage.querySelectorAll('.settings-label'))
                        .find(el => el.textContent.includes('Enable') || el.textContent.includes('ÌôúÏÑ±Ìôî'));
                    if (notifLabel) notifLabel.textContent = this.t('enableNotifications');
                    
                    // Clear Cache label
                    const clearCacheLabel = Array.from(settingsPage.querySelectorAll('.settings-label'))
                        .find(el => el.textContent.includes('Clear Cache') || el.textContent.includes('Ï∫êÏãú'));
                    if (clearCacheLabel) clearCacheLabel.textContent = this.t('clearCache');
                    
                    // Clear Saved label
                    const clearSavedLabel = Array.from(settingsPage.querySelectorAll('.settings-label'))
                        .find(el => el.textContent.includes('Clear Saved') || el.textContent.includes('Ï†ÄÏû•Îêú'));
                    if (clearSavedLabel) clearSavedLabel.textContent = this.t('clearSaved');
                }
                
                // Update Search page
                const searchPage = document.getElementById('searchPage');
                if (searchPage) {
                    const h2 = searchPage.querySelector('h2');
                    if (h2) {
                        const emoji = h2.textContent.match(/[üîç]/)?.[0] || '';
                        h2.textContent = `${emoji} ${this.t('search')}`.trim();
                    }
                    
                    // Update Popular Tags title
                    const popularTagsTitle = Array.from(searchPage.querySelectorAll('h3'))
                        .find(el => el.textContent.includes('Popular Tags') || el.textContent.includes('Ïù∏Í∏∞'));
                    if (popularTagsTitle) {
                        popularTagsTitle.textContent = 'üî• ' + this.t('popularTags');
                    }
                }
                
                // Update search placeholder
                const searchInput = document.getElementById('searchInput');
                if (searchInput) searchInput.placeholder = this.t('searchPlaceholder');
                
                const headerSearchInput = document.getElementById('headerSearchInput');
                if (headerSearchInput) headerSearchInput.placeholder = this.t('searchPlaceholder');
                
                // Update SNS company filter button text (All Companies)
                const snsAllBtn = document.querySelector('[data-company="all"]');
                if (snsAllBtn && (snsAllBtn.textContent.includes('All') || snsAllBtn.textContent.includes('Î™®Îì†'))) {
                    snsAllBtn.textContent = this.t('allCompanies');
                }
                
                // Update SNS Filter buttons on Featured section
                const snsFeaturedAllBtn = document.querySelector('[data-company="all"][onclick*="Featured"]') || 
                                         Array.from(document.querySelectorAll('button')).find(b => 
                                             b.textContent.includes('All') && b.closest('#snsFeaturedCompanyFilter'));
                if (snsFeaturedAllBtn) {
                    snsFeaturedAllBtn.textContent = this.t('allCompanies');
                }
                
                // Update pagination labels
                document.querySelectorAll('.pagination').forEach(pagination => {
                    const prevBtn = pagination.querySelector('button:first-child');
                    const nextBtn = pagination.querySelector('button:last-child');
                    if (prevBtn && (prevBtn.textContent.includes('Prev') || prevBtn.textContent.includes('Ïù¥Ï†Ñ'))) {
                        prevBtn.textContent = this.t('prev');
                    }
                    if (nextBtn && (nextBtn.textContent.includes('Next') || nextBtn.textContent.includes('Îã§Ïùå'))) {
                        nextBtn.textContent = this.t('next');
                    }
                });
                
                // Update "Try Now" buttons in AI Tools section
                document.querySelectorAll('button').forEach(btn => {
                    if (btn.textContent.includes('Try Now') || btn.textContent.includes('ÏßÄÍ∏à ÏãúÎèÑ')) {
                        btn.textContent = '‚Üí ' + this.t('tryNow');
                    }
                });
                
                // Update language select dropdown value
                const langSelect = document.getElementById('languageSelect');
                if (langSelect) langSelect.value = this.currentLang;
                
                console.log(`‚úÖ UI updated to language: ${this.currentLang}`);
            },

            toggleAutoTranslate() {
                // API call would go here
            },

            toggleNotifications() {
                // API call would go here
            },

            clearCache() {
                if (confirm('Clear all cached data?')) {
                    localStorage.clear();
                    alert('Cache cleared!');
                }
            },

            clearSaved() {
                if (confirm('Delete all saved articles? This cannot be undone.')) {
                    // API call would go here
                }
            },

            headerSearch() {
                const searchQuery = document.getElementById('headerSearchInput').value.trim();
                if (searchQuery) {
                    // Set search input
                    document.getElementById('searchInput').value = searchQuery;
                    // Navigate to search page and perform search
                    this.navigate('search');
                    // Call search function
                    this.search();
                } else {
                    alert('Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                }
            },

            // Show article detail page
            showArticleDetail(article) {
                console.log('üî¥ [showArticleDetail] START');
                console.log('üî¥ [showArticleDetail] Article:', article);
                
                try {
                    // Store current article for reference
                    this.currentArticle = article;
                    
                    // Store previous page for back navigation
                    this.previousPageName = this.currentPageName || 'home';
                    
                    console.log('üìÑ Article Detail:', {
                        title: article.title,
                        url: article.url,
                        source: article.source,
                        isSNS: !!article.sourceId
                    });
                    
                    // Set detail page content
                    const detailTitle = document.getElementById('detailTitle');
                    const detailAuthor = document.getElementById('detailAuthor');
                    const detailSource = document.getElementById('detailSource');
                    const detailDate = document.getElementById('detailDate');
                    
                    console.log('üî¥ [showArticleDetail] Elements found:', {
                        detailTitle: !!detailTitle,
                        detailAuthor: !!detailAuthor,
                        detailSource: !!detailSource,
                        detailDate: !!detailDate
                    });
                    
                    if (!detailTitle || !detailAuthor || !detailSource || !detailDate) {
                        console.error('‚ùå [showArticleDetail] Required elements not found!');
                        return;
                    }
                    
                    detailTitle.textContent = article.title || '';
                    detailAuthor.textContent = article.author || article.source || 'Unknown';
                    detailSource.textContent = article.source || 'Unknown Source';
                    
                    // Handle both regular articles and SNS articles (which use timestamp instead of date)
                    const displayDate = article.date || 
                        (article.timestamp ? new Date(article.timestamp).toLocaleDateString('ko-KR', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        }) : new Date().toLocaleDateString('ko-KR'));
                    
                    detailDate.textContent = displayDate;
                    
                    const detailBreadcrumb = document.getElementById('detailBreadcrumb');
                    const detailCategory = document.getElementById('detailCategory');
                    if (detailBreadcrumb) detailBreadcrumb.textContent = article.title || '';
                    if (detailCategory) detailCategory.textContent = 'Latest';
                    
                    // Article content
                    const detailContent = document.getElementById('detailContent');
                    if (detailContent) {
                        const contentArray = (article.content || article.summary || 'No content available').split('\n').filter(p => p.trim());
                        detailContent.innerHTML = contentArray.map(para => 
                            `<p>${para.trim()}</p>`
                        ).join('');
                    }

                    // Summary points
                    const detailSummary = document.getElementById('detailSummary');
                    if (detailSummary) {
                        const summaryText = article.summary || article.content || '';
                        const summaryPoints = summaryText.split('.')
                            .filter(s => s.trim().length > 10)
                            .slice(0, 4)
                            .map(s => s.trim() + '.');
                        
                        detailSummary.innerHTML = summaryPoints.map(point => 
                            `<li>${point}</li>`
                        ).join('');
                    }
                    
                    // Read more button
                    const readMoreBtn = document.getElementById('detailReadMore');
                    if (readMoreBtn) {
                        readMoreBtn.innerHTML = `${this.t('readMore')}<span style="font-size: 18px;">‚Üí</span>`;
                        
                        readMoreBtn.onclick = () => {
                            let url = article.url;
                            
                            if (!url) {
                                console.warn('‚ö†Ô∏è No URL provided for article:', article.title);
                                if (article.sourceId) {
                                    alert(`No source URL available. Visit ${article.source}.`);
                                } else {
                                    alert('Article URL is not available');
                                }
                                return;
                            }
                            
                            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                                url = 'https://' + url;
                            }
                            
                            console.log('üîó Opening URL:', url);
                            window.open(url, '_blank');
                        };
                    }

                    console.log('üî¥ [showArticleDetail] Content set successfully');
                    
                    // Related articles
                    const detailRelated = document.getElementById('detailRelated');
                    if (detailRelated) {
                        try {
                            console.log('üî¥ [showArticleDetail] Rendering related articles...');
                            
                            // Get related articles from allNews or SNS articles
                            let allAvailableArticles = [];
                            
                            if (this.allNews && Array.isArray(this.allNews)) {
                                allAvailableArticles = [...this.allNews];
                            }
                            if (this.snsArticles && Array.isArray(this.snsArticles)) {
                                allAvailableArticles = [...allAvailableArticles, ...this.snsArticles];
                            }
                            if (this.snsFeaturedArticles && Array.isArray(this.snsFeaturedArticles)) {
                                allAvailableArticles = [...allAvailableArticles, ...this.snsFeaturedArticles];
                            }
                            
                            console.log('üî¥ [showArticleDetail] Available articles for related:', allAvailableArticles.length);
                            
                            // Filter out current article and get different ones
                            const relatedArticles = allAvailableArticles
                                .filter(a => a && a.title !== article.title && a.url !== article.url)
                                .slice(0, 3);
                            
                            console.log('üî¥ [showArticleDetail] Found related articles:', relatedArticles.length);
                            
                            if (relatedArticles.length === 0) {
                                // If no related articles, use sample articles
                                relatedArticles.push(
                                    {
                                        title: 'The Rise of AI-Powered Code Assistants',
                                        summary: 'Deep analysis of how tools like GitHub Copilot are transforming the software development environment.',
                                        source: 'Wired',
                                        url: 'https://www.wired.com/story/github-copilot-ai',
                                        content: 'AI-powered code assistants are changing how developers work.'
                                    },
                                    {
                                        title: 'Ethical Considerations in Generative AI',
                                        summary: 'Exploring challenges and responsibilities in developing powerful AI models.',
                                        source: 'MIT Technology Review',
                                        url: 'https://www.technologyreview.com/2024/generative-ai-ethics',
                                        content: 'Ethics in AI development is becoming increasingly important.'
                                    },
                                    {
                                        title: 'NVIDIA\'s New AI Chip Architecture',
                                        summary: 'Analysis of latest hardware advances driving next-generation AI.',
                                        source: 'AnandTech',
                                        url: 'https://www.anandtech.com/show/nvidia-ai-chip-architecture',
                                        content: 'NVIDIA releases cutting-edge AI chip technology.'
                                    }
                                );
                            }
                            
                            const relatedHtml = relatedArticles.map(relatedArticle => `
                                <div style="background: var(--color-surface-light); border: 1px solid var(--color-border); border-radius: 6px; padding: 12px; cursor: pointer; transition: all 0.3s ease;" 
                                     onmouseover="this.style.background='var(--color-surface)'; this.style.borderColor='var(--color-accent)';"
                                     onmouseout="this.style.background='var(--color-surface-light)'; this.style.borderColor='var(--color-border)';"
                                     onclick="app.showArticleDetail({title: '${relatedArticle.title.replace(/'/g, "\\'")}', summary: '${(relatedArticle.summary || '').replace(/'/g, "\\'")}', source: '${relatedArticle.source}', url: '${relatedArticle.url}', content: '${(relatedArticle.content || '').replace(/'/g, "\\'")}'})">
                                    <h4 style="font-weight: bold; margin-bottom: 8px; color: var(--color-text); margin-top: 0;">${relatedArticle.title}</h4>
                                    <p style="font-size: 13px; color: var(--color-text-secondary); margin-bottom: 8px; margin-top: 0;">${relatedArticle.summary || ''}</p>
                                    <span style="font-size: 12px; color: var(--color-text-secondary);">üì∞ ${relatedArticle.source}</span>
                                </div>
                            `).join('');
                            
                            detailRelated.innerHTML = relatedHtml;
                            console.log('üî¥ [showArticleDetail] Related articles rendered successfully');
                        } catch (relErr) {
                            console.error('‚ùå Error rendering related articles:', relErr);
                            detailRelated.innerHTML = '<div style="color: var(--color-text-secondary);">Related articles unavailable</div>';
                        }
                    }
                    
                } catch (err) {
                    console.error('‚ùå [showArticleDetail] Error in content setup:', err);
                    console.error('‚ùå Stack:', err.stack);
                }
                
                try {
                    // Quick Reactions
                    const articleId = article.url || article.title;
                    const userReactions = JSON.parse(localStorage.getItem('userReactions') || '{}');
                    const reactionCounts = JSON.parse(localStorage.getItem('reactionCounts') || '{}');
                    const userReaction = userReactions[articleId];
                    
                    const allReactions = {};
                    const reactions = ['üëç', 'üî•', 'üòä', 'üòï'];
                    reactions.forEach(reaction => {
                        const key = `${articleId}_${reaction}`;
                        allReactions[reaction] = reactionCounts[key] || 0;
                    });
                    
                    this.updateReactionUI(articleId, userReaction, allReactions);
                    console.log('üî¥ [showArticleDetail] Reactions updated');
                } catch (err) {
                    console.error('‚ùå Error updating reactions:', err);
                }

                // Navigate to detail page
                console.log('üéØ About to navigate to detail page');
                this.navigate('detail');
                console.log('‚úÖ showArticleDetail complete');
            }
            
        };

        // Initialize app on load
        console.log('üìã Script loaded, waiting for DOMContentLoaded...');
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('‚úì DOMContentLoaded fired');
            const indicator = document.getElementById('statusIndicator');
            if (indicator) {
                indicator.style.display = 'block';
                indicator.textContent = '‚è≥ Initializing app...';
            }
        });
        
        window.addEventListener('load', () => {
            console.log('‚úì Window load event fired');
            app.init();
        });
    </script>
</body>

</html>
